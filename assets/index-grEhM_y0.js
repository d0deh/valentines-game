(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const J={name:"My Love",successMessage:"I love you so much!",bookTitle:"Our Story",coverSubtitle:"A Journey of Love",theme:{primary:"#2D5A3D",secondary:"#9CAF88",accent:"#D4A574",background:"#1a2a1a",cream:"#FAF8F0",mint:"#E8F5E9"},pages:[{text:"",image:"images/page-01.jpg"},{text:"",image:"images/page-02.jpg"},{text:"",image:"images/page-03.jpg"},{text:"",image:"images/page-04.jpg"},{text:"",image:"images/page-05.jpg"},{text:"",image:"images/page-06.jpg"},{text:"",image:"images/page-07.jpg"},{text:"",image:"images/page-08.jpg"},{text:"",image:"images/page-09.jpg"},{text:"",image:"images/page-10.jpg"},{text:"",image:"images/page-11.jpg"},{text:"",image:"images/page-12.jpg"},{text:"",image:"images/page-13.jpg"},{text:"",image:"images/page-14.jpg"},{text:"",image:"images/page-15.jpg"},{text:"",image:"images/page-16.jpg"}],animations:{pageFlipDuration:800,particleCount:25,confettiCount:120,heartCount:15},audio:{musicFile:"music.mp3",pageTurnVolume:.25,musicVolume:.5,enableSounds:!0},book:{width:1200,height:675,minWidth:300,maxWidth:1400,minHeight:169,maxHeight:788},noButtonTexts:["No","Are you sure?","Really?","Think about it...","Please reconsider?","Pretty please?","With sugar on top?","I'll be a good boy!","Give me a chance!","Please? ü•∫","I'm begging you!","On my knees here!","Have mercy!","Don't do this to me!","I need you!","What would Lulu Think?","ü•∫üëâüëà","I'll do anything!","PLEASE I'M DESPERATE","This button has feelings!","You're breaking my heart","I thought we had something","Was it all a lie?","I can't live without you","*sobs uncontrollably*","What if I said please x100?","I'll give you chocolate!","Free hugs forever?","I'll do the dishes!","Name your price!","Ill force you to love me","You can't escape love","Reem?","I have all day...","Still here btw","ok but consider: yes","no is just yes spelled wrong","I'm not crying you're crying","Im telling mama","This is my villain origin story","REEEEEEEEEEEEEEEEEM","üíîüíîüíîüíîüíî","why must you hurt me","I'm literally a button","This is button abuse","Fine. I'll wait.","*stares intensely*","üëÅÔ∏èüëÑüëÅÔ∏è","You know you want to","Just click yes already","The yes button misses you","YES IS RIGHT THERE ‚Üí","I believe in us","Love always wins","...please? ü•∫üíö"]};var es=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={exports:{}};(function(l,t){(function(e,i){i(t)})(es,function(e){class i{constructor(r,h){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=h,this.nowDrawingDensity=this.createdDensity,this.render=r}setDensity(r){this.createdDensity=r,this.nowDrawingDensity=r}setDrawingDensity(r){this.nowDrawingDensity=r}setPosition(r){this.state.position=r}setAngle(r){this.state.angle=r}setArea(r){this.state.area=r}setHardDrawingAngle(r){this.state.hardDrawingAngle=r}setHardAngle(r){this.state.hardAngle=r,this.state.hardDrawingAngle=r}setOrientation(r){this.orientation=r}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class n extends i{constructor(r,h,f){super(r,f),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=h}draw(r){const h=this.render.getContext(),f=this.render.convertToGlobal(this.state.position),p=this.render.getRect().pageWidth,m=this.render.getRect().height;h.save(),h.translate(f.x,f.y),h.beginPath();for(let y of this.state.area)y!==null&&(y=this.render.convertToGlobal(y),h.lineTo(y.x-f.x,y.y-f.y));h.rotate(this.state.angle),h.clip(),this.isLoad?h.drawImage(this.image,0,0,p,m):this.drawLoader(h,{x:0,y:0},p,m),h.restore()}simpleDraw(r){const h=this.render.getRect(),f=this.render.getContext(),p=h.pageWidth,m=h.height,y=r===1?h.left+h.pageWidth:h.left,C=h.top;this.isLoad?f.drawImage(this.image,y,C,p,m):this.drawLoader(f,{x:y,y:C},p,m)}drawLoader(r,h,f,p){r.beginPath(),r.strokeStyle="rgb(200, 200, 200)",r.fillStyle="rgb(255, 255, 255)",r.lineWidth=1,r.rect(h.x+1,h.y+1,f-1,p-1),r.stroke(),r.fill();const m={x:h.x+f/2,y:h.y+p/2};r.beginPath(),r.lineWidth=10,r.arc(m.x,m.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),r.stroke(),r.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(r,h){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=h,this.app=r,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let h=0;h<this.pages.length;h++)this.portraitSpread.push([h]);let r=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([r]),r++);for(let h=r;h<this.pages.length;h+=2)h<this.pages.length-1?this.landscapeSpread.push([h,h+1]):(this.landscapeSpread.push([h]),this.pages[h].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(r){const h=this.getSpread();for(let f=0;f<h.length;f++)if(r===h[f][0]||r===h[f][1])return f;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(r){if(r>=0&&r<this.pages.length)return this.pages[r];throw new Error("Invalid page number")}nextBy(r){const h=this.pages.indexOf(r);return h<this.pages.length-1?this.pages[h+1]:null}prevBy(r){const h=this.pages.indexOf(r);return h>0?this.pages[h-1]:null}getFlippingPage(r){const h=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return r===0?this.pages[h].newTemporaryCopy():this.pages[h-1];{const f=r===0?this.getSpread()[h+1]:this.getSpread()[h-1];return f.length===1||r===0?this.pages[f[0]]:this.pages[f[1]]}}getBottomPage(r){const h=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return r===0?this.pages[h+1]:this.pages[h-1];{const f=r===0?this.getSpread()[h+1]:this.getSpread()[h-1];return f.length===1?this.pages[f[0]]:r===0?this.pages[f[1]]:this.pages[f[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(r=null){if(r===null&&(r=this.currentPageIndex),r<0||r>=this.pages.length)return;const h=this.getSpreadIndexByPage(r);h!==null&&(this.currentSpreadIndex=h,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(r){if(!(r>=0&&r<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=r}showSpread(){const r=this.getSpread()[this.currentSpreadIndex];r.length===2?(this.render.setLeftPage(this.pages[r[0]]),this.render.setRightPage(this.pages[r[1]])):this.render.getOrientation()==="landscape"&&r[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[r[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[r[0]])),this.currentPageIndex=r[0],this.app.updatePageIndex(this.currentPageIndex)}}class a extends s{constructor(r,h,f){super(r,h),this.imagesHref=f}load(){for(const r of this.imagesHref){const h=new n(this.render,r,"soft");h.load(),this.pages.push(h)}this.createSpread()}}class o{static GetDistanceBetweenTwoPoint(r,h){return r===null||h===null?1/0:Math.sqrt(Math.pow(h.x-r.x,2)+Math.pow(h.y-r.y,2))}static GetSegmentLength(r){return o.GetDistanceBetweenTwoPoint(r[0],r[1])}static GetAngleBetweenTwoLine(r,h){const f=r[0].y-r[1].y,p=h[0].y-h[1].y,m=r[1].x-r[0].x,y=h[1].x-h[0].x;return Math.acos((f*p+m*y)/(Math.sqrt(f*f+m*m)*Math.sqrt(p*p+y*y)))}static PointInRect(r,h){return h===null?null:h.x>=r.left&&h.x<=r.width+r.left&&h.y>=r.top&&h.y<=r.top+r.height?h:null}static GetRotatedPoint(r,h,f){return{x:r.x*Math.cos(f)+r.y*Math.sin(f)+h.x,y:r.y*Math.cos(f)-r.x*Math.sin(f)+h.y}}static LimitPointToCircle(r,h,f){if(o.GetDistanceBetweenTwoPoint(r,f)<=h)return f;const p=r.x,m=r.y,y=f.x,C=f.y;let M=Math.sqrt(Math.pow(h,2)*Math.pow(p-y,2)/(Math.pow(p-y,2)+Math.pow(m-C,2)))+p;f.x<0&&(M*=-1);let E=(M-p)*(m-C)/(p-y)+m;return p-y+m===0&&(E=h),{x:M,y:E}}static GetIntersectBetweenTwoSegment(r,h,f){return o.PointInRect(r,o.GetIntersectBeetwenTwoLine(h,f))}static GetIntersectBeetwenTwoLine(r,h){const f=r[0].y-r[1].y,p=h[0].y-h[1].y,m=r[1].x-r[0].x,y=h[1].x-h[0].x,C=r[0].x*r[1].y-r[1].x*r[0].y,M=h[0].x*h[1].y-h[1].x*h[0].y,E=f*M-p*C,D=m*M-y*C,A=-(C*y-M*m)/(f*y-p*m),O=-(f*M-p*C)/(f*y-p*m);if(isFinite(A)&&isFinite(O))return{x:A,y:O};if(Math.abs(E-D)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(r,h){const f=Math.abs(r.x-h.x),p=Math.abs(r.y-h.y),m=Math.max(f,p),y=[r];function C(M,E,D,A,O){return E>M?M+O*(D/A):E<M?M-O*(D/A):M}for(let M=1;M<=m;M+=1)y.push({x:C(r.x,h.x,f,m,M),y:C(r.y,h.y,p,m,M)});return y}}class c extends i{constructor(r,h,f){super(r,f),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=h,this.element.classList.add("stf__item"),this.element.classList.add("--"+f)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new c(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(r){const h=r||this.nowDrawingDensity,f=this.render.convertToGlobal(this.state.position),p=this.render.getRect().pageWidth,m=this.render.getRect().height;this.element.classList.remove("--simple");const y=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${p}px;
            height: ${m}px;
        `;h==="hard"?this.drawHard(y):this.drawSoft(f,y)}drawHard(r=""){const h=this.render.getRect().left+this.render.getRect().width/2,f=this.state.hardDrawingAngle,p=r+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${f}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${h}px, 0, 0) rotateY(${f}deg);`);this.element.style.cssText=p}drawSoft(r,h=""){let f="polygon( ";for(const m of this.state.area)if(m!==null){let y=this.render.getDirection()===1?{x:-m.x+this.state.position.x,y:m.y-this.state.position.y}:{x:m.x-this.state.position.x,y:m.y-this.state.position.y};y=o.GetRotatedPoint(y,{x:0,y:0},this.state.angle),f+=y.x+"px "+y.y+"px, "}f=f.slice(0,-2),f+=")";const p=h+`transform-origin: 0 0; clip-path: ${f}; -webkit-clip-path: ${f};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${r.x}px, ${r.y}px);`:`transform: translate3d(${r.x}px, ${r.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=p}simpleDraw(r){const h=this.render.getRect(),f=h.pageWidth,p=h.height,m=r===1?h.left+h.pageWidth:h.left,y=h.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${p}px; 
            left: ${m}px; 
            top: ${y}px; 
            width: ${f}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(r){super.setOrientation(r),this.element.classList.remove("--left","--right"),this.element.classList.add(r===1?"--right":"--left")}setDrawingDensity(r){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+r),super.setDrawingDensity(r)}}class u extends s{constructor(r,h,f,p){super(r,h),this.element=f,this.pagesElement=p}load(){for(const r of this.pagesElement){const h=new c(this.render,r,r.dataset.density==="hard"?"hard":"soft");h.load(),this.pages.push(h)}this.createSpread()}}class d{constructor(r,h,f,p){this.direction=r,this.corner=h,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(f,10),this.pageHeight=parseInt(p,10)}calc(r){try{return this.position=this.calcAngleAndPosition(r),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const r=[];let h=!1;return r.push(this.rect.topLeft),r.push(this.topIntersectPoint),this.sideIntersectPoint===null?h=!0:(r.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(h=!1)),r.push(this.bottomIntersectPoint),(h||this.corner==="bottom")&&r.push(this.rect.bottomLeft),r}getBottomClipArea(){const r=[];return r.push(this.topIntersectPoint),this.corner==="top"?r.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&r.push({x:this.pageWidth,y:0}),r.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?o.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&r.push(this.sideIntersectPoint):this.corner==="top"&&r.push({x:this.pageWidth,y:this.pageHeight}),r.push(this.bottomIntersectPoint),r.push(this.topIntersectPoint),r}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const r=o.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?r:Math.PI-r}calcAngleAndPosition(r){let h=r;if(this.updateAngleAndGeometry(h),h=this.corner==="top"?this.checkPositionAtCenterLine(h,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(h,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(h.x-this.pageWidth)<1&&Math.abs(h.y)<1)throw new Error("Point is too small");return h}updateAngleAndGeometry(r){this.angle=this.calculateAngle(r),this.rect=this.getPageRect(r)}calculateAngle(r){const h=this.pageWidth-r.x+1,f=this.corner==="bottom"?this.pageHeight-r.y:r.y;let p=2*Math.acos(h/Math.sqrt(f*f+h*h));f<0&&(p=-p);const m=Math.PI-p;if(!isFinite(p)||m>=0&&m<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(p=-p),p}getPageRect(r){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],r):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],r)}getRectFromBasePoint(r,h){return{topLeft:this.getRotatedPoint(r[0],h),topRight:this.getRotatedPoint(r[1],h),bottomLeft:this.getRotatedPoint(r[2],h),bottomRight:this.getRotatedPoint(r[3],h)}}getRotatedPoint(r,h){return{x:r.x*Math.cos(this.angle)+r.y*Math.sin(this.angle)+h.x,y:r.y*Math.cos(this.angle)-r.x*Math.sin(this.angle)+h.y}}calculateIntersectPoint(r){const h={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[r,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[r,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[r,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=o.GetIntersectBetweenTwoSegment(h,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(r,h,f){let p=r;const m=o.LimitPointToCircle(h,this.pageWidth,p);p!==m&&(p=m,this.updateAngleAndGeometry(p));const y=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let C=this.rect.bottomRight,M=this.rect.topLeft;if(this.corner==="bottom"&&(C=this.rect.topRight,M=this.rect.bottomLeft),C.x<=0){const E=o.LimitPointToCircle(f,y,M);E!==p&&(p=E,this.updateAngleAndGeometry(p))}return p}getSegmentToShadowLine(){const r=this.getShadowStartPoint();return[r,r!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class _{constructor(r,h){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=r,this.app=h}fold(r){this.setState("user_fold"),this.calc===null&&this.start(r),this.do(this.render.convertToPage(r))}flip(r){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(r)||(this.calc!==null&&this.render.finishAnimation(),!this.start(r)))return;const h=this.getBoundsRect();this.setState("flipping");const f=h.height/10,p=this.calc.getCorner()==="bottom"?h.height-f:f,m=this.calc.getCorner()==="bottom"?h.height:0;this.calc.calc({x:h.pageWidth-f,y:p}),this.animateFlippingTo({x:h.pageWidth-f,y:p},{x:-h.pageWidth,y:m},!0)}start(r){this.reset();const h=this.render.convertToBook(r),f=this.getBoundsRect(),p=this.getDirectionByPoint(h),m=h.y>=f.height/2?"bottom":"top";if(!this.checkDirection(p))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(p),this.bottomPage=this.app.getPageCollection().getBottomPage(p),this.render.getOrientation()==="landscape")if(p===1){const y=this.app.getPageCollection().nextBy(this.flippingPage);y!==null&&this.flippingPage.getDensity()!==y.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),y.setDrawingDensity("hard"))}else{const y=this.app.getPageCollection().prevBy(this.flippingPage);y!==null&&this.flippingPage.getDensity()!==y.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),y.setDrawingDensity("hard"))}return this.render.setDirection(p),this.calc=new d(p,m,f.pageWidth.toString(10),f.height.toString(10)),!0}catch{return!1}}do(r){if(this.calc!==null&&this.calc.calc(r)){const h=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*h)/100):this.flippingPage.setHardAngle(-90*(200-2*h)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),h,this.calc.getDirection())}}flipToPage(r,h){const f=this.app.getPageCollection().getCurrentSpreadIndex(),p=this.app.getPageCollection().getSpreadIndexByPage(r);try{p>f&&(this.app.getPageCollection().setCurrentSpreadIndex(p-1),this.flipNext(h)),p<f&&(this.app.getPageCollection().setCurrentSpreadIndex(p+1),this.flipPrev(h))}catch{}}flipNext(r){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:r==="top"?1:this.render.getRect().height-2})}flipPrev(r){this.flip({x:10,y:r==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const r=this.calc.getPosition(),h=this.getBoundsRect(),f=this.calc.getCorner()==="bottom"?h.height:0;r.x<=0?this.animateFlippingTo(r,{x:-h.pageWidth,y:f},!0):this.animateFlippingTo(r,{x:h.pageWidth,y:f},!1)}showCorner(r){if(!this.checkState("read","fold_corner"))return;const h=this.getBoundsRect(),f=h.pageWidth;if(this.isPointOnCorners(r))if(this.calc===null){if(!this.start(r))return;this.setState("fold_corner"),this.calc.calc({x:f-1,y:1});const p=50,m=this.calc.getCorner()==="bottom"?h.height-1:1,y=this.calc.getCorner()==="bottom"?h.height-p:p;this.animateFlippingTo({x:f-1,y:m},{x:f-p,y},!1,!1)}else this.do(this.render.convertToPage(r));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(r,h,f,p=!0){const m=o.GetCordsFromTwoPoint(r,h),y=[];for(const M of m)y.push(()=>this.do(M));const C=this.getAnimationDuration(m.length);this.render.startAnimation(y,C,()=>{this.calc&&(f&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),p&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(r){this.state!==r&&(this.app.updateState(r),this.state=r)}getDirectionByPoint(r){const h=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(r.x-h.pageWidth<=h.width/5)return 1}else if(r.x<h.width/2)return 1;return 0}getAnimationDuration(r){const h=this.app.getSettings().flippingTime;return r>=1e3?h:r/1e3*h}checkDirection(r){return r===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...r){for(const h of r)if(this.state===h)return!0;return!1}isPointOnCorners(r){const h=this.getBoundsRect(),f=h.pageWidth,p=Math.sqrt(Math.pow(f,2)+Math.pow(h.height,2))/5,m=this.render.convertToBook(r);return m.x>0&&m.y>0&&m.x<h.width&&m.y<h.height&&(m.x<p||m.x>h.width-p)&&(m.y<p||m.y>h.height-p)}}class x{constructor(r,h){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=h,this.app=r;const f=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=f.exec(window.navigator.userAgent)!==null}render(r){if(this.animation!==null){const h=Math.round((r-this.animation.startedAt)/this.animation.durationFrame);h<this.animation.frames.length?this.animation.frames[h]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=r,this.drawFrame()}start(){this.update();const r=h=>{this.render(h),requestAnimationFrame(r)};requestAnimationFrame(r)}startAnimation(r,h,f){this.finishAnimation(),this.animation={frames:r,duration:h,durationFrame:h/r.length,onAnimateEnd:f,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const r=this.calculateBoundsRect();this.orientation!==r&&(this.orientation=r,this.app.updateOrientation(r))}calculateBoundsRect(){let r="landscape";const h=this.getBlockWidth(),f=h/2,p=this.getBlockHeight()/2,m=this.setting.width/this.setting.height;let y=this.setting.width,C=this.setting.height,M=f-y;return this.setting.size==="stretch"?(h<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(r="portrait"),y=r==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,y>this.setting.maxWidth&&(y=this.setting.maxWidth),C=y/m,C>this.getBlockHeight()&&(C=this.getBlockHeight(),y=C*m),M=r==="portrait"?f-y/2-y:f-y):h<2*y&&this.app.getSettings().usePortrait&&(r="portrait",M=f-y/2-y),this.boundsRect={left:M,top:p-C/2,width:2*y,height:C,pageWidth:y},r}setShadowData(r,h,f,p){if(!this.app.getSettings().drawShadow)return;const m=100*this.getSettings().maxShadowOpacity;this.shadow={pos:r,angle:h,width:3*this.getRect().pageWidth/4*f/100,opacity:(100-f)*m/100/100,direction:p,progress:2*f}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(r){this.pageRect=r}setDirection(r){this.direction=r}setRightPage(r){r!==null&&r.setOrientation(1),this.rightPage=r}setLeftPage(r){r!==null&&r.setOrientation(0),this.leftPage=r}setBottomPage(r){r!==null&&r.setOrientation(this.direction===1?0:1),this.bottomPage=r}setFlippingPage(r){r!==null&&r.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=r}convertToBook(r){const h=this.getRect();return{x:r.x-h.left,y:r.y-h.top}}isSafari(){return this.safari}convertToPage(r,h){h||(h=this.direction);const f=this.getRect();return{x:h===0?r.x-f.left-f.width/2:f.width/2-r.x+f.left,y:r.y-f.top}}convertToGlobal(r,h){if(h||(h=this.direction),r==null)return null;const f=this.getRect();return{x:h===0?r.x+f.left+f.width/2:f.width/2-r.x+f.left,y:r.y+f.top}}convertRectToGlobal(r,h){return h||(h=this.direction),{topLeft:this.convertToGlobal(r.topLeft,h),topRight:this.convertToGlobal(r.topRight,h),bottomLeft:this.convertToGlobal(r.bottomLeft,h),bottomRight:this.convertToGlobal(r.bottomRight,h)}}}class w extends x{constructor(r,h,f){super(r,h),this.canvas=f,this.ctx=f.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const r=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(r.left+r.pageWidth,r.top,r.width,r.height),this.ctx.clip())}drawBookShadow(){const r=this.getRect();this.ctx.save(),this.ctx.beginPath();const h=r.width/20;this.ctx.rect(r.left,r.top,r.width,r.height);const f={x:r.left+r.width/2-h/2,y:0};this.ctx.translate(f.x,f.y);const p=this.ctx.createLinearGradient(0,0,h,0);p.addColorStop(0,"rgba(0, 0, 0, 0)"),p.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),p.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),p.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),p.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),p.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=p,this.ctx.fillRect(0,0,h,2*r.height),this.ctx.restore()}drawOuterShadow(){const r=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(r.left,r.top,r.width,r.height);const h=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(h.x,h.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const f=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),f.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),f.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),f.addColorStop(0,"rgba(0, 0, 0, 0)"),f.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=f,this.ctx.fillRect(0,0,this.shadow.width,2*r.height),this.ctx.restore()}drawInnerShadow(){const r=this.getRect();this.ctx.save(),this.ctx.beginPath();const h=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),f=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(f.topLeft.x,f.topLeft.y),this.ctx.lineTo(f.topRight.x,f.topRight.y),this.ctx.lineTo(f.bottomRight.x,f.bottomRight.y),this.ctx.lineTo(f.bottomLeft.x,f.bottomLeft.y),this.ctx.translate(h.x,h.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const p=3*this.shadow.width/4,m=this.ctx.createLinearGradient(0,0,p,0);this.shadow.direction===0?(this.ctx.translate(-p,-100),m.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),m.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),m.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),m.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),m.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),m.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),m.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),m.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=m,this.ctx.fillRect(0,0,p,2*r.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class b{constructor(r,h,f){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=m=>{if(this.checkTarget(m.target)){const y=this.getMousePos(m.clientX,m.clientY);this.app.startUserTouch(y),m.preventDefault()}},this.onTouchStart=m=>{if(this.checkTarget(m.target)&&m.changedTouches.length>0){const y=m.changedTouches[0],C=this.getMousePos(y.clientX,y.clientY);this.touchPoint={point:C,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(C)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||m.preventDefault()}},this.onMouseUp=m=>{const y=this.getMousePos(m.clientX,m.clientY);this.app.userStop(y)},this.onMouseMove=m=>{const y=this.getMousePos(m.clientX,m.clientY);this.app.userMove(y,!1)},this.onTouchMove=m=>{if(m.changedTouches.length>0){const y=m.changedTouches[0],C=this.getMousePos(y.clientX,y.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-C.x)>10||this.app.getState()!=="read")&&m.cancelable&&this.app.userMove(C,!0),this.app.getState()!=="read"&&m.preventDefault()):this.app.userMove(C,!0)}},this.onTouchEnd=m=>{if(m.changedTouches.length>0){const y=m.changedTouches[0],C=this.getMousePos(y.clientX,y.clientY);let M=!1;if(this.touchPoint!==null){const E=C.x-this.touchPoint.point.x,D=Math.abs(C.y-this.touchPoint.point.y);Math.abs(E)>this.swipeDistance&&D<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(E>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),M=!0),this.touchPoint=null}this.app.userStop(C,M)}},this.parentElement=r,r.classList.add("stf__parent"),r.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=r.querySelector(".stf__wrapper"),this.app=h;const p=this.app.getSettings().usePortrait?1:2;r.style.minWidth=f.minWidth*p+"px",r.style.minHeight=f.minHeight+"px",f.size==="fixed"&&(r.style.minWidth=f.width*p+"px",r.style.minHeight=f.height+"px"),f.autoSize&&(r.style.width="100%",r.style.maxWidth=2*f.maxWidth+"px"),r.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=f.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(r){this.wrapper.classList.remove("--portrait","--landscape"),r==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(r,h){const f=this.distElement.getBoundingClientRect();return{x:r-f.left,y:h-f.top}}checkTarget(r){return!this.app.getSettings().clickEventForward||!["a","button"].includes(r.tagName.toLowerCase())}}class g extends b{constructor(r,h,f,p){super(r,h,f),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=r.querySelector(".stf__block"),this.items=p;for(const m of p)this.distElement.appendChild(m);this.setHandlers()}clear(){for(const r of this.items)this.parentElement.appendChild(r)}updateItems(r){this.removeHandlers(),this.distElement.innerHTML="";for(const h of r)this.distElement.appendChild(h);this.items=r,this.setHandlers()}update(){this.app.getRender().update()}}class P extends b{constructor(r,h,f){super(r,h,f),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=r.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const r=getComputedStyle(this.canvas),h=parseInt(r.getPropertyValue("width"),10),f=parseInt(r.getPropertyValue("height"),10);this.canvas.width=h,this.canvas.height=f}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class S extends x{constructor(r,h,f){super(r,h),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=f,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const r=this.getRect(),h=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let f=(100-h)*(2.5*r.pageWidth)/100+20;f>r.pageWidth&&(f=r.pageWidth);let p=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${f}px;
            height: ${r.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*h/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${r.left+r.width/2}px;
            transform-origin: 0 0;
        `;p+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=p}drawHardOuterShadow(){const r=this.getRect();let h=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*r.pageWidth)/100+20;h>r.pageWidth&&(h=r.pageWidth);let f=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${h}px;
            height: ${r.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${r.left+r.width/2}px;
            transform-origin: 0 0;
        `;f+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=f}drawInnerShadow(){const r=this.getRect(),h=3*this.shadow.width/4,f=this.getDirection()===0?h:0,p=this.getDirection()===0?"to left":"to right",m=this.convertToGlobal(this.shadow.pos),y=this.shadow.angle+3*Math.PI/2,C=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let M="polygon( ";for(const D of C){let A=this.getDirection()===1?{x:-D.x+this.shadow.pos.x,y:D.y-this.shadow.pos.y}:{x:D.x-this.shadow.pos.x,y:D.y-this.shadow.pos.y};A=o.GetRotatedPoint(A,{x:f,y:100},y),M+=A.x+"px "+A.y+"px, "}M=M.slice(0,-2),M+=")";const E=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${h}px;
            height: ${2*r.height}px;
            background: linear-gradient(${p},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${f}px 100px;
            transform: translate3d(${m.x-f}px, ${m.y-100}px, 0) rotate(${y}rad);
            clip-path: ${M};
            -webkit-clip-path: ${M};
        `;this.innerShadow.style.cssText=E}drawOuterShadow(){const r=this.getRect(),h=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),f=this.shadow.angle+3*Math.PI/2,p=this.getDirection()===1?this.shadow.width:0,m=this.getDirection()===0?"to right":"to left",y=[{x:0,y:0},{x:r.pageWidth,y:0},{x:r.pageWidth,y:r.height},{x:0,y:r.height}];let C="polygon( ";for(const E of y)if(E!==null){let D=this.getDirection()===1?{x:-E.x+this.shadow.pos.x,y:E.y-this.shadow.pos.y}:{x:E.x-this.shadow.pos.x,y:E.y-this.shadow.pos.y};D=o.GetRotatedPoint(D,{x:p,y:100},f),C+=D.x+"px "+D.y+"px, "}C=C.slice(0,-2),C+=")";const M=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*r.height}px;
            background: linear-gradient(${m}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${p}px 100px;
            transform: translate3d(${h.x-p}px, ${h.y-100}px, 0) rotate(${f}rad);
            clip-path: ${C};
            -webkit-clip-path: ${C};
        `;this.outerShadow.style.cssText=M}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const r=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(r))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const r of this.app.getPageCollection().getPages())r!==this.leftPage&&r!==this.rightPage&&r!==this.flippingPage&&r!==this.bottomPage&&(r.getElement().style.cssText="display: none"),r.getTemporaryCopy()!==this.flippingPage&&r.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class T{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(r){const h=this._default;if(Object.assign(h,r),h.size!=="stretch"&&h.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(h.width<=0||h.height<=0)throw new Error("Invalid width or height");if(h.flippingTime<=0)throw new Error("Invalid flipping time");return h.size==="stretch"?(h.minWidth<=0&&(h.minWidth=100),h.maxWidth<h.minWidth&&(h.maxWidth=2e3),h.minHeight<=0&&(h.minHeight=100),h.maxHeight<h.minHeight&&(h.maxHeight=2e3)):(h.minWidth=h.width,h.maxWidth=h.width,h.minHeight=h.height,h.maxHeight=h.height),h}}(function(v,r){r===void 0&&(r={});var h=r.insertAt;if(typeof document<"u"){var f=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.type="text/css",h==="top"&&f.firstChild?f.insertBefore(p,f.firstChild):f.appendChild(p),p.styleSheet?p.styleSheet.cssText=v:p.appendChild(document.createTextNode(v))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),e.PageFlip=class extends class{constructor(){this.events=new Map}on(v,r){return this.events.has(v)?this.events.get(v).push(r):this.events.set(v,[r]),this}off(v){this.events.delete(v)}trigger(v,r,h=null){if(this.events.has(v))for(const f of this.events.get(v))f({data:h,object:r})}}{constructor(v,r){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new T().getSettings(r),this.block=v}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(v){this.ui=new P(this.block,this,this.setting);const r=this.ui.getCanvas();this.render=new w(this,this.setting,r),this.flipController=new _(this.render,this),this.pages=new a(this,this.render,v),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(v){this.ui=new g(this.block,this,this.setting,v),this.render=new S(this,this.setting,this.ui.getDistElement()),this.flipController=new _(this.render,this),this.pages=new u(this,this.render,this.ui.getDistElement(),v),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(v){const r=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new a(this,this.render,v),this.pages.load(),this.pages.show(r),this.trigger("update",this,{page:r,mode:this.render.getOrientation()})}updateFromHtml(v){const r=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new u(this,this.render,this.ui.getDistElement(),v),this.pages.load(),this.ui.updateItems(v),this.render.reload(),this.pages.show(r),this.trigger("update",this,{page:r,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(v){this.pages.show(v)}flipNext(v="top"){this.flipController.flipNext(v)}flipPrev(v="top"){this.flipController.flipPrev(v)}flip(v,r="top"){this.flipController.flipToPage(v,r)}updateState(v){this.trigger("changeState",this,v)}updatePageIndex(v){this.trigger("flip",this,v)}updateOrientation(v){this.ui.setOrientationStyle(v),this.update(),this.trigger("changeOrientation",this,v)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(v){return this.pages.getPage(v)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(v){this.mousePosition=v,this.isUserTouch=!0,this.isUserMove=!1}userMove(v,r){this.isUserTouch||r||!this.setting.showPageCorners?this.isUserTouch&&o.GetDistanceBetweenTwoPoint(this.mousePosition,v)>5&&(this.isUserMove=!0,this.flipController.fold(v)):this.flipController.showCorner(v)}userStop(v,r=!1){this.isUserTouch&&(this.isUserTouch=!1,r||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(v)))}},Object.defineProperty(e,"__esModule",{value:!0})})})(Ye,Ye.exports);var is=Ye.exports;const Di=[{bg:"#f5e6e8",content:`
      <defs>
        <pattern id="hearts1" patternUnits="userSpaceOnUse" width="40" height="40">
          <path d="M20 30 L10 20 Q5 15 10 10 Q15 5 20 12 Q25 5 30 10 Q35 15 30 20 Z" fill="#e8b4b8" opacity="0.6"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#hearts1)"/>
      <text x="50%" y="50%" text-anchor="middle" fill="#c9787c" font-size="48" font-family="serif">‚ô•</text>
    `},{bg:"#e8f0e8",content:`
      <circle cx="50%" cy="50%" r="30" fill="#9CAF88" opacity="0.3"/>
      <circle cx="50%" cy="40%" r="12" fill="#c8e6c9"/>
      <circle cx="40%" cy="50%" r="12" fill="#c8e6c9"/>
      <circle cx="60%" cy="50%" r="12" fill="#c8e6c9"/>
      <circle cx="45%" cy="58%" r="12" fill="#c8e6c9"/>
      <circle cx="55%" cy="58%" r="12" fill="#c8e6c9"/>
      <circle cx="50%" cy="50%" r="8" fill="#D4A574"/>
    `},{bg:"#e6e8f0",content:`
      <text x="30%" y="30%" font-size="24" fill="#9CAF88" opacity="0.7">‚ú¶</text>
      <text x="70%" y="25%" font-size="32" fill="#D4A574" opacity="0.8">‚òÖ</text>
      <text x="50%" y="55%" font-size="48" fill="#9CAF88">‚ú®</text>
      <text x="25%" y="70%" font-size="28" fill="#D4A574" opacity="0.6">‚≠ê</text>
      <text x="75%" y="75%" font-size="20" fill="#9CAF88" opacity="0.7">‚ú¶</text>
    `},{bg:"#e8f5e9",content:`
      <text x="50%" y="35%" font-size="40" fill="#2D5A3D" opacity="0.8">üåø</text>
      <text x="30%" y="55%" font-size="32" fill="#9CAF88">üçÉ</text>
      <text x="70%" y="60%" font-size="36" fill="#2D5A3D" opacity="0.7">üå±</text>
      <text x="50%" y="75%" font-size="28" fill="#9CAF88" opacity="0.6">üçÄ</text>
    `},{bg:"#faf0f0",content:`
      <polygon points="150,100 200,150 150,200 100,150" fill="#e8b4b8" opacity="0.4"/>
      <polygon points="150,120 180,150 150,180 120,150" fill="#c9787c" opacity="0.6"/>
      <text x="50%" y="52%" text-anchor="middle" font-size="28" fill="#9b4d52">‚ù§</text>
    `},{bg:"#e8e6f0",content:`
      <circle cx="40%" cy="40%" r="40" fill="#D4A574" opacity="0.3"/>
      <circle cx="30%" cy="35%" r="35" fill="#e8e6f0"/>
      <text x="65%" y="30%" font-size="20" fill="#9CAF88">‚ú¶</text>
      <text x="75%" y="50%" font-size="16" fill="#D4A574">‚òÖ</text>
      <text x="60%" y="70%" font-size="24" fill="#9CAF88">‚≠ê</text>
      <text x="50%" y="80%" font-size="14" fill="#D4A574">‚ú¶</text>
    `},{bg:"#f0e8e6",content:`
      <path d="M100,150 Q150,100 200,150 T300,150" stroke="#D4A574" stroke-width="3" fill="none" opacity="0.5"/>
      <path d="M80,180 Q130,130 180,180 T280,180" stroke="#9CAF88" stroke-width="2" fill="none" opacity="0.4"/>
      <text x="50%" y="50%" text-anchor="middle" font-size="36" fill="#c9787c">üíï</text>
    `},{bg:"#f5e8e8",content:`
      <text x="50%" y="45%" text-anchor="middle" font-size="48">üåπ</text>
      <text x="30%" y="65%" font-size="24" opacity="0.7">üå∑</text>
      <text x="70%" y="60%" font-size="28" opacity="0.8">üå∏</text>
    `},{bg:"#e8f0f5",content:`
      <text x="35%" y="35%" font-size="32">ü¶ã</text>
      <text x="65%" y="45%" font-size="40">ü¶ã</text>
      <text x="45%" y="70%" font-size="28" opacity="0.7">ü¶ã</text>
      <circle cx="50%" cy="50%" r="5" fill="#D4A574"/>
    `},{bg:"#f0f5f8",content:`
      <circle cx="70%" cy="30%" r="25" fill="#D4A574" opacity="0.6"/>
      <ellipse cx="40%" cy="50%" rx="40" ry="20" fill="#fff" opacity="0.8"/>
      <ellipse cx="30%" cy="48%" rx="25" ry="15" fill="#fff" opacity="0.8"/>
      <ellipse cx="50%" cy="48%" rx="30" ry="18" fill="#fff" opacity="0.8"/>
      <text x="50%" y="75%" text-anchor="middle" font-size="24" fill="#9CAF88">‚òÄÔ∏è</text>
    `},{bg:"#f8f0f5",content:`
      <text x="25%" y="25%" font-size="20">‚ú®</text>
      <text x="75%" y="20%" font-size="24">üí´</text>
      <text x="50%" y="50%" text-anchor="middle" font-size="48">‚≠ê</text>
      <text x="20%" y="70%" font-size="18">‚ú®</text>
      <text x="80%" y="75%" font-size="22">üí´</text>
      <text x="50%" y="85%" font-size="16">‚ú®</text>
    `},{bg:"#e8f0e8",content:`
      <text x="30%" y="35%" font-size="36">üïäÔ∏è</text>
      <text x="65%" y="45%" font-size="28">üê¶</text>
      <text x="50%" y="70%" text-anchor="middle" font-size="20" fill="#9CAF88">~ ~ ~</text>
    `},{bg:"#f5f0e8",content:`
      <rect x="45%" y="50%" width="10%" height="30%" fill="#D4A574"/>
      <ellipse cx="50%" cy="48%" rx="8%" ry="4%" fill="#D4A574"/>
      <ellipse cx="50%" cy="42%" rx="4%" ry="8%" fill="#ffcc00" opacity="0.8"/>
      <ellipse cx="50%" cy="38%" rx="2%" ry="5%" fill="#ff9900"/>
      <text x="30%" y="70%" font-size="16">‚ú®</text>
      <text x="70%" y="65%" font-size="14">‚ú®</text>
    `},{bg:"#f0e8f0",content:`
      <text x="30%" y="35%" font-size="28" fill="#9CAF88">‚ô™</text>
      <text x="55%" y="45%" font-size="36" fill="#D4A574">‚ô´</text>
      <text x="70%" y="30%" font-size="24" fill="#c9787c">‚ô¨</text>
      <text x="40%" y="65%" font-size="32" fill="#9CAF88">‚ô©</text>
      <text x="60%" y="75%" font-size="20" fill="#D4A574">‚ô™</text>
    `},{bg:"#f8f5f0",content:`
      <circle cx="40%" cy="50%" r="30" stroke="#D4A574" stroke-width="6" fill="none"/>
      <circle cx="60%" cy="50%" r="30" stroke="#D4A574" stroke-width="6" fill="none"/>
      <text x="50%" y="80%" text-anchor="middle" font-size="20" fill="#9CAF88">üíç</text>
    `},{bg:"#f5e8f0",content:`
      <rect x="25%" y="35%" width="50%" height="35%" fill="#fff" stroke="#D4A574" stroke-width="2"/>
      <polygon points="150,105 100,140 200,140" fill="#fff" stroke="#D4A574" stroke-width="2"/>
      <polygon points="150,125 100,105 200,105" fill="#faf0f0" stroke="#D4A574" stroke-width="2"/>
      <text x="50%" y="62%" text-anchor="middle" font-size="28" fill="#c9787c">‚ù§</text>
    `}];function ns(l){const t=(l-1)%Di.length,e=Di[t];return`
    <svg viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg"
         role="img" aria-label="Decorative illustration for page ${l}"
         style="width: 100%; height: 100%;">
      <rect width="100%" height="100%" fill="${e.bg}"/>
      ${e.content}
    </svg>
  `}let pt=null;function ss(){return`
    <div class="page cover-page" data-density="hard">
      <div class="cover-decoration" aria-hidden="true">üíö</div>
      <h1 class="cover-title">${J.bookTitle}</h1>
      <p class="cover-subtitle">For ${J.name}</p>
      <p class="cover-hint" aria-hidden="true">Click to begin...</p>
    </div>
  `}function rs(l){return l?"/valentines-game/"+l:""}function os(l,t){const e=t.text&&t.text.trim().length>0,i=!e&&t.image?" image-full":"",n=l<=2?"":' loading="lazy"',s=rs(t.image),a=t.image?`<img src="${s}" alt="Page ${l}"${n} onload="this.classList.add('loaded')" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">`:"",o=ns(l),c=e?`<p class="page-text">${t.text}</p>`:"",u=e?`<span class="page-number" aria-label="Page ${l}">${l}</span>`:"";return`
    <div class="page content-page${i}" role="article" aria-label="Page ${l}">
      <div class="image-container">
        ${a}
        <div class="image-placeholder" ${t.image?'style="display:none"':""}>
          ${o}
        </div>
      </div>
      ${c}
      ${u}
    </div>
  `}function as(){return`
    <div class="page end-page" data-density="hard" role="article" aria-label="End of Story">
      <div class="end-page-content">
        <div class="end-decoration" aria-hidden="true">üíö</div>
        <p class="end-text">And now, I have a question for you...</p>
        <button class="end-page-btn" id="end-page-btn" type="button">
          I'm ready üíö
        </button>
      </div>
    </div>
  `}function hs(){const l=document.getElementById("book");if(!l){console.error("Book container not found");return}l.innerHTML="",l.insertAdjacentHTML("beforeend",ss()),J.pages.forEach((t,e)=>{const i=e+1;l.insertAdjacentHTML("beforeend",os(i,t))}),l.insertAdjacentHTML("beforeend",as())}function ls(){return J.pages.length+2}function cs(){const l=document.getElementById("book");if(!l)return console.error("Book container not found"),null;const{width:t,height:e,minWidth:i,maxWidth:n,minHeight:s,maxHeight:a}=J.book;pt=new is.PageFlip(l,{width:t,height:e,size:"stretch",minWidth:i,maxWidth:n,minHeight:s,maxHeight:a,drawShadow:!0,flippingTime:J.animations.pageFlipDuration,usePortrait:!0,showCover:!0,maxShadowOpacity:.5,mobileScrollSupport:!1,clickEventForward:!0,useMouseEvents:!0,swipeDistance:30,showPageCorners:!0});const o=document.querySelectorAll("#book .page");return pt.loadFromHTML(o),pt}function Ji(){return pt}function tn(){pt&&pt.flipNext()}function en(){pt&&pt.flipPrev()}function us(){pt&&pt.updateFromSize()}class ds{constructor(){this.musicElement=null,this.isMusicPlaying=!1,this.isMusicStarted=!1,this.audioContext=null}init(){this.musicElement=document.getElementById("bg-music"),this.musicElement&&(this.musicElement.volume=J.audio.musicVolume)}getAudioContext(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext}playPageTurnSound(){try{const t=this.getAudioContext(),e=.15,i=t.sampleRate*e,n=t.createBuffer(1,i,t.sampleRate),s=n.getChannelData(0);for(let u=0;u<i;u++)s[u]=(Math.random()*2-1)*Math.exp(-u/(i*.1));const a=t.createBufferSource();a.buffer=n;const o=t.createGain();o.gain.setValueAtTime(J.audio.pageTurnVolume*.3,t.currentTime),o.gain.exponentialRampToValueAtTime(.001,t.currentTime+e);const c=t.createBiquadFilter();c.type="lowpass",c.frequency.value=2e3,a.connect(c),c.connect(o),o.connect(t.destination),a.start(),a.stop(t.currentTime+e)}catch(t){console.warn("Page turn sound failed:",t.message)}}playSuccessSound(){try{const t=this.getAudioContext();[523,659,784,1047].forEach((i,n)=>{const s=t.createOscillator(),a=t.createGain();s.type="sine",s.connect(a),a.connect(t.destination);const o=t.currentTime+n*.12;s.frequency.setValueAtTime(i,o),a.gain.setValueAtTime(.15,o),a.gain.exponentialRampToValueAtTime(.01,o+.35),s.start(o),s.stop(o+.35)})}catch(t){console.warn("Success sound failed:",t.message)}}async tryPlayMusic(){if(!this.musicElement)return!1;try{return await this.musicElement.play(),this.isMusicPlaying=!0,this.isMusicStarted=!0,!0}catch(t){return console.warn("Music autoplay blocked:",t.message),!1}}async toggleMusic(){if(!this.musicElement)return this.isMusicPlaying;if(this.isMusicPlaying)this.musicElement.pause(),this.isMusicPlaying=!1;else try{await this.musicElement.play(),this.isMusicPlaying=!0,this.isMusicStarted=!0}catch(t){console.warn("Music play failed:",t.message)}return this.isMusicPlaying}get isPlaying(){return this.isMusicPlaying}get hasStarted(){return this.isMusicStarted}destroy(){this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.musicElement&&(this.musicElement.pause(),this.musicElement=null)}}const Ut=new ds,ki=["üåø","‚ú®","üíö","üçÉ","‚≠ê"],Ai=["16px","20px","24px","28px"];function fs(){const l=document.getElementById("particles");if(!l){console.warn("Particles container not found");return}l.innerHTML="";const t=J.animations.particleCount;for(let e=0;e<t;e++){const i=document.createElement("div");i.className="particle",i.setAttribute("aria-hidden","true"),i.textContent=ki[Math.floor(Math.random()*ki.length)],i.style.left=`${Math.random()*100}%`,i.style.fontSize=Ai[Math.floor(Math.random()*Ai.length)],i.style.animationDelay=`${Math.random()*10}s`,i.style.animationDuration=`${8+Math.random()*6}s`,l.appendChild(i)}}function yt(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function nn(l,t){l.prototype=Object.create(t.prototype),l.prototype.constructor=l,l.__proto__=t}/*!
 * GSAP 3.14.2
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var rt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Zt={duration:.5,overwrite:!1,delay:0},ci,q,L,lt=1e8,R=1/lt,Xe=Math.PI*2,gs=Xe/4,ps=0,sn=Math.sqrt,_s=Math.cos,ms=Math.sin,V=function(t){return typeof t=="string"},W=function(t){return typeof t=="function"},wt=function(t){return typeof t=="number"},ui=function(t){return typeof t>"u"},_t=function(t){return typeof t=="object"},j=function(t){return t!==!1},di=function(){return typeof window<"u"},xe=function(t){return W(t)||V(t)},rn=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Y=Array.isArray,ys=/random\([^)]+\)/g,xs=/,\s*/g,Ii=/(?:-?\.?\d|\.)+/gi,on=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Vt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Be=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,an=/[+-]=-?[.\d]+/,ws=/[^,'"\[\]\s]+/gi,vs=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,z,dt,je,fi,ot={},Me={},hn,ln=function(t){return(Me=Qt(t,ot))&&tt},gi=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ce=function(t,e){return!e&&console.warn(t)},cn=function(t,e){return t&&(ot[t]=e)&&Me&&(Me[t]=e)||ot},ue=function(){return 0},bs={suppressEvents:!0,isStart:!0,kill:!1},be={suppressEvents:!0,kill:!1},Ps={suppressEvents:!0},pi={},Tt=[],Ze={},un,et={},We={},Ri=30,Pe=[],_i="",mi=function(t){var e=t[0],i,n;if(_t(e)||W(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=Pe.length;n--&&!Pe[n].targetTest(e););i=Pe[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ln(t[n],i)))||t.splice(n,1);return t},zt=function(t){return t._gsap||mi(ct(t))[0]._gsap},dn=function(t,e,i){return(i=t[e])&&W(i)?t[e]():ui(i)&&t.getAttribute&&t.getAttribute(e)||i},Z=function(t,e){return(t=t.split(",")).forEach(e)||t},H=function(t){return Math.round(t*1e5)/1e5||0},F=function(t){return Math.round(t*1e7)/1e7||0},Yt=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},Ss=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},Ee=function(){var t=Tt.length,e=Tt.slice(0),i,n;for(Ze={},Tt.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},yi=function(t){return!!(t._initted||t._startAt||t.add)},fn=function(t,e,i,n){Tt.length&&!q&&Ee(),t.render(e,i,!!(q&&e<0&&yi(t))),Tt.length&&!q&&Ee()},gn=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ws).length<2?e:V(t)?t.trim():t},pn=function(t){return t},at=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Ts=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Qt=function(t,e){for(var i in e)t[i]=e[i];return t},Oi=function l(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=_t(e[i])?l(t[i]||(t[i]={}),e[i]):e[i]);return t},De=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},ae=function(t){var e=t.parent||z,i=t.keyframes?Ts(Y(t.keyframes)):at;if(j(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Cs=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},_n=function(t,e,i,n,s){var a=t[n],o;if(s)for(o=e[s];a&&a[s]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t,e},Le=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,a=e._next;s?s._next=a:t[i]===e&&(t[i]=a),a?a._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},Mt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Bt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Ms=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Qe=function(t,e,i,n){return t._startAt&&(q?t._startAt.revert(be):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Es=function l(t){return!t||t._ts&&l(t.parent)},Li=function(t){return t._repeat?Kt(t._tTime,t=t.duration()+t._rDelay)*t:0},Kt=function(t,e){var i=Math.floor(t=F(t/e));return t&&i===t?i-1:i},ke=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Fe=function(t){return t._end=F(t._start+(t._tDur/Math.abs(t._ts||t._rts||R)||0))},ze=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=F(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Fe(t),i._dirty||Bt(i,t)),t},mn=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=ke(t.rawTime(),e),(!e._dur||me(0,e.totalDuration(),i)-e._tTime>R)&&e.render(i,!0)),Bt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-R}},ft=function(t,e,i,n){return e.parent&&Mt(e),e._start=F((wt(i)?i:i||t!==z?ht(t,i,e):t._time)+e._delay),e._end=F(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),_n(t,e,"_first","_last",t._sort?"_start":0),Ke(e)||(t._recent=e),n||mn(t,e),t._ts<0&&ze(t,t._tTime),t},yn=function(t,e){return(ot.ScrollTrigger||gi("scrollTrigger",e))&&ot.ScrollTrigger.create(e,t)},xn=function(t,e,i,n,s){if(wi(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!q&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&un!==it.frame)return Tt.push(t),t._lazy=[s,n],1},Ds=function l(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||l(e))},Ke=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},ks=function(t,e,i,n){var s=t.ratio,a=e<0||!e&&(!t._start&&Ds(t)&&!(!t._initted&&Ke(t))||(t._ts<0||t._dp._ts<0)&&!Ke(t))?0:1,o=t._rDelay,c=0,u,d,_;if(o&&t._repeat&&(c=me(0,t._tDur,e),d=Kt(c,o),t._yoyo&&d&1&&(a=1-a),d!==Kt(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||q||n||t._zTime===R||!e&&t._zTime){if(!t._initted&&xn(t,e,n,i,c))return;for(_=t._zTime,t._zTime=e||(i?R:0),i||(i=e&&!_),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=c,u=t._pt;u;)u.r(a,u.d),u=u._next;e<0&&Qe(t,e,i,!0),t._onUpdate&&!i&&nt(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&nt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&Mt(t,1),!i&&!q&&(nt(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},As=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Jt=function(t,e,i,n){var s=t._repeat,a=F(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:F(a*(s+1)+t._rDelay*s):a,o>0&&!n&&ze(t,t._tTime=t._tDur*o),t.parent&&Fe(t),i||Bt(t.parent,t),t},Fi=function(t){return t instanceof X?Bt(t):Jt(t,t._dur)},Is={_start:0,endTime:ue,totalDuration:ue},ht=function l(t,e,i){var n=t.labels,s=t._recent||Is,a=t.duration()>=lt?s.endTime(!1):t._dur,o,c,u;return V(e)&&(isNaN(e)||e in n)?(c=e.charAt(0),u=e.substr(-1)==="%",o=e.indexOf("="),c==="<"||c===">"?(o>=0&&(e=e.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(u?(o<0?s:i).totalDuration()/100:1)):o<0?(e in n||(n[e]=a),n[e]):(c=parseFloat(e.charAt(o-1)+e.substr(o+1)),u&&i&&(c=c/100*(Y(i)?i[0]:i).totalDuration()),o>1?l(t,e.substr(0,o-1),i)+c:a+c)):e==null?a:+e},he=function(t,e,i){var n=wt(e[1]),s=(n?2:1)+(t<2?0:1),a=e[s],o,c;if(n&&(a.duration=e[1]),a.parent=i,t){for(o=a,c=i;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=j(c.vars.inherit)&&c.parent;a.immediateRender=j(o.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new G(e[0],a,e[s+1])},kt=function(t,e){return t||t===0?e(t):e},me=function(t,e,i){return i<t?t:i>e?e:i},U=function(t,e){return!V(t)||!(e=vs.exec(t))?"":e[1]},Rs=function(t,e,i){return kt(i,function(n){return me(t,e,n)})},Je=[].slice,wn=function(t,e){return t&&_t(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&_t(t[0]))&&!t.nodeType&&t!==dt},Os=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return V(n)&&!e||wn(n,1)?(s=i).push.apply(s,ct(n)):i.push(n)})||i},ct=function(t,e,i){return L&&!e&&L.selector?L.selector(t):V(t)&&!i&&(je||!te())?Je.call((e||fi).querySelectorAll(t),0):Y(t)?Os(t,i):wn(t)?Je.call(t,0):t?[t]:[]},ti=function(t){return t=ct(t)[0]||ce("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ct(e,i.querySelectorAll?i:i===t?ce("Invalid scope")||fi.createElement("div"):t)}},vn=function(t){return t.sort(function(){return .5-Math.random()})},bn=function(t){if(W(t))return t;var e=_t(t)?t:{each:t},i=Wt(e.ease),n=e.from||0,s=parseFloat(e.base)||0,a={},o=n>0&&n<1,c=isNaN(n)||o,u=e.axis,d=n,_=n;return V(n)?d=_={center:.5,edges:.5,end:1}[n]||0:!o&&c&&(d=n[0],_=n[1]),function(x,w,b){var g=(b||e).length,P=a[g],S,T,v,r,h,f,p,m,y;if(!P){if(y=e.grid==="auto"?0:(e.grid||[1,lt])[1],!y){for(p=-lt;p<(p=b[y++].getBoundingClientRect().left)&&y<g;);y<g&&y--}for(P=a[g]=[],S=c?Math.min(y,g)*d-.5:n%y,T=y===lt?0:c?g*_/y-.5:n/y|0,p=0,m=lt,f=0;f<g;f++)v=f%y-S,r=T-(f/y|0),P[f]=h=u?Math.abs(u==="y"?r:v):sn(v*v+r*r),h>p&&(p=h),h<m&&(m=h);n==="random"&&vn(P),P.max=p-m,P.min=m,P.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(y>g?g-1:u?u==="y"?g/y:y:Math.max(y,g/y))||0)*(n==="edges"?-1:1),P.b=g<0?s-g:s,P.u=U(e.amount||e.each)||0,i=i&&g<0?In(i):i}return g=(P[x]-P.min)/P.max||0,F(P.b+(i?i(g):g)*P.v)+P.u}},ei=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=F(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(wt(i)?0:U(i))}},Pn=function(t,e){var i=Y(t),n,s;return!i&&_t(t)&&(n=i=t.radius||lt,t.values?(t=ct(t.values),(s=!wt(t[0]))&&(n*=n)):t=ei(t.increment)),kt(e,i?W(t)?function(a){return s=t(a),Math.abs(s-a)<=n?s:a}:function(a){for(var o=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),u=lt,d=0,_=t.length,x,w;_--;)s?(x=t[_].x-o,w=t[_].y-c,x=x*x+w*w):x=Math.abs(t[_]-o),x<u&&(u=x,d=_);return d=!n||u<=n?t[d]:a,s||d===a||wt(a)?d:d+U(a)}:ei(t))},Sn=function(t,e,i,n){return kt(Y(t)?!e:i===!0?!!(i=0):!n,function(){return Y(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},Ls=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,a){return a(s)},n)}},Fs=function(t,e){return function(i){return t(parseFloat(i))+(e||U(i))}},zs=function(t,e,i){return Cn(t,e,0,1,i)},Tn=function(t,e,i){return kt(i,function(n){return t[~~e(n)]})},Bs=function l(t,e,i){var n=e-t;return Y(t)?Tn(t,l(0,t.length),e):kt(i,function(s){return(n+(s-t)%n)%n+t})},Ws=function l(t,e,i){var n=e-t,s=n*2;return Y(t)?Tn(t,l(0,t.length-1),e):kt(i,function(a){return a=(s+(a-t)%s)%s||0,t+(a>n?s-a:a)})},de=function(t){return t.replace(ys,function(e){var i=e.indexOf("[")+1,n=e.substring(i||7,i?e.indexOf("]"):e.length-1).split(xs);return Sn(i?n:+n[0],i?0:+n[1],+n[2]||1e-5)})},Cn=function(t,e,i,n,s){var a=e-t,o=n-i;return kt(s,function(c){return i+((c-t)/a*o||0)})},Hs=function l(t,e,i,n){var s=isNaN(t+e)?0:function(w){return(1-w)*t+w*e};if(!s){var a=V(t),o={},c,u,d,_,x;if(i===!0&&(n=1)&&(i=null),a)t={p:t},e={p:e};else if(Y(t)&&!Y(e)){for(d=[],_=t.length,x=_-2,u=1;u<_;u++)d.push(l(t[u-1],t[u]));_--,s=function(b){b*=_;var g=Math.min(x,~~b);return d[g](b-g)},i=e}else n||(t=Qt(Y(t)?[]:{},t));if(!d){for(c in e)xi.call(o,t,c,"get",e[c]);s=function(b){return Pi(b,o)||(a?t.p:t)}}}return kt(i,s)},zi=function(t,e,i){var n=t.labels,s=lt,a,o,c;for(a in n)o=n[a]-e,o<0==!!i&&o&&s>(o=Math.abs(o))&&(c=a,s=o);return c},nt=function(t,e,i){var n=t.vars,s=n[e],a=L,o=t._ctx,c,u,d;if(s)return c=n[e+"Params"],u=n.callbackScope||t,i&&Tt.length&&Ee(),o&&(L=o),d=c?s.apply(u,c):s.call(u),L=a,d},re=function(t){return Mt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!q),t.progress()<1&&nt(t,"onInterrupt"),t},qt,Mn=[],En=function(t){if(t)if(t=!t.name&&t.default||t,di()||t.headless){var e=t.name,i=W(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:ue,render:Pi,add:xi,kill:ir,modifier:er,rawVars:0},a={targetTest:0,get:0,getSetter:bi,aliases:{},register:0};if(te(),t!==n){if(et[e])return;at(n,at(De(t,s),a)),Qt(n.prototype,Qt(s,De(t,a))),et[n.prop=e]=n,t.targetTest&&(Pe.push(n),pi[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}cn(e,n),t.register&&t.register(tt,n,Q)}else Mn.push(t)},I=255,oe={aqua:[0,I,I],lime:[0,I,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,I],navy:[0,0,128],white:[I,I,I],olive:[128,128,0],yellow:[I,I,0],orange:[I,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[I,0,0],pink:[I,192,203],cyan:[0,I,I],transparent:[I,I,I,0]},He=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*I+.5|0},Dn=function(t,e,i){var n=t?wt(t)?[t>>16,t>>8&I,t&I]:0:oe.black,s,a,o,c,u,d,_,x,w,b;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),oe[t])n=oe[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+s+s+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&I,n&I,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&I,t&I]}else if(t.substr(0,3)==="hsl"){if(n=b=t.match(Ii),!e)c=+n[0]%360/360,u=+n[1]/100,d=+n[2]/100,a=d<=.5?d*(u+1):d+u-d*u,s=d*2-a,n.length>3&&(n[3]*=1),n[0]=He(c+1/3,s,a),n[1]=He(c,s,a),n[2]=He(c-1/3,s,a);else if(~t.indexOf("="))return n=t.match(on),i&&n.length<4&&(n[3]=1),n}else n=t.match(Ii)||oe.transparent;n=n.map(Number)}return e&&!b&&(s=n[0]/I,a=n[1]/I,o=n[2]/I,_=Math.max(s,a,o),x=Math.min(s,a,o),d=(_+x)/2,_===x?c=u=0:(w=_-x,u=d>.5?w/(2-_-x):w/(_+x),c=_===s?(a-o)/w+(a<o?6:0):_===a?(o-s)/w+2:(s-a)/w+4,c*=60),n[0]=~~(c+.5),n[1]=~~(u*100+.5),n[2]=~~(d*100+.5)),i&&n.length<4&&(n[3]=1),n},kn=function(t){var e=[],i=[],n=-1;return t.split(Ct).forEach(function(s){var a=s.match(Vt)||[];e.push.apply(e,a),i.push(n+=a.length+1)}),e.c=i,e},Bi=function(t,e,i){var n="",s=(t+n).match(Ct),a=e?"hsla(":"rgba(",o=0,c,u,d,_;if(!s)return t;if(s=s.map(function(x){return(x=Dn(x,e,1))&&a+(e?x[0]+","+x[1]+"%,"+x[2]+"%,"+x[3]:x.join(","))+")"}),i&&(d=kn(t),c=i.c,c.join(n)!==d.c.join(n)))for(u=t.replace(Ct,"1").split(Vt),_=u.length-1;o<_;o++)n+=u[o]+(~c.indexOf(o)?s.shift()||a+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!u)for(u=t.split(Ct),_=u.length-1;o<_;o++)n+=u[o]+s[o];return n+u[_]},Ct=function(){var l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in oe)l+="|"+t+"\\b";return new RegExp(l+")","gi")}(),$s=/hsl[a]?\(/,An=function(t){var e=t.join(" "),i;if(Ct.lastIndex=0,Ct.test(e))return i=$s.test(e),t[1]=Bi(t[1],i),t[0]=Bi(t[0],i,kn(t[1])),!0},fe,it=function(){var l=Date.now,t=500,e=33,i=l(),n=i,s=1e3/240,a=s,o=[],c,u,d,_,x,w,b=function g(P){var S=l()-n,T=P===!0,v,r,h,f;if((S>t||S<0)&&(i+=S-e),n+=S,h=n-i,v=h-a,(v>0||T)&&(f=++_.frame,x=h-_.time*1e3,_.time=h=h/1e3,a+=v+(v>=s?4:s-v),r=1),T||(c=u(g)),r)for(w=0;w<o.length;w++)o[w](h,x,f,P)};return _={time:0,frame:0,tick:function(){b(!0)},deltaRatio:function(P){return x/(1e3/(P||60))},wake:function(){hn&&(!je&&di()&&(dt=je=window,fi=dt.document||{},ot.gsap=tt,(dt.gsapVersions||(dt.gsapVersions=[])).push(tt.version),ln(Me||dt.GreenSockGlobals||!dt.gsap&&dt||{}),Mn.forEach(En)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&_.sleep(),u=d||function(P){return setTimeout(P,a-_.time*1e3+1|0)},fe=1,b(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),fe=0,u=ue},lagSmoothing:function(P,S){t=P||1/0,e=Math.min(S||33,t)},fps:function(P){s=1e3/(P||240),a=_.time*1e3+s},add:function(P,S,T){var v=S?function(r,h,f,p){P(r,h,f,p),_.remove(v)}:P;return _.remove(P),o[T?"unshift":"push"](v),te(),v},remove:function(P,S){~(S=o.indexOf(P))&&o.splice(S,1)&&w>=S&&w--},_listeners:o},_}(),te=function(){return!fe&&it.wake()},k={},Gs=/^[\d.\-M][\d.\-,\s]/,Ns=/["']/g,Vs=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,a=i.length,o,c,u;s<a;s++)c=i[s],o=s!==a-1?c.lastIndexOf(","):c.length,u=c.substr(0,o),e[n]=isNaN(u)?u.replace(Ns,"").trim():+u,n=c.substr(o+1).trim();return e},qs=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},Us=function(t){var e=(t+"").split("("),i=k[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Vs(e[1])]:qs(t).split(",").map(gn)):k._CE&&Gs.test(t)?k._CE("",t):i},In=function(t){return function(e){return 1-t(1-e)}},Rn=function l(t,e){for(var i=t._first,n;i;)i instanceof X?l(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?l(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Wt=function(t,e){return t&&(W(t)?t:k[t]||Us(t))||e},$t=function(t,e,i,n){i===void 0&&(i=function(c){return 1-e(1-c)}),n===void 0&&(n=function(c){return c<.5?e(c*2)/2:1-e((1-c)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},a;return Z(t,function(o){k[o]=ot[o]=s,k[a=o.toLowerCase()]=i;for(var c in s)k[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=k[o+"."+c]=s[c]}),s},On=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},$e=function l(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),a=s/Xe*(Math.asin(1/n)||0),o=function(d){return d===1?1:n*Math.pow(2,-10*d)*ms((d-a)*s)+1},c=t==="out"?o:t==="in"?function(u){return 1-o(1-u)}:On(o);return s=Xe/s,c.config=function(u,d){return l(t,u,d)},c},Ge=function l(t,e){e===void 0&&(e=1.70158);var i=function(a){return a?--a*a*((e+1)*a+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:On(i);return n.config=function(s){return l(t,s)},n};Z("Linear,Quad,Cubic,Quart,Quint,Strong",function(l,t){var e=t<5?t+1:t;$t(l+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});k.Linear.easeNone=k.none=k.Linear.easeIn;$t("Elastic",$e("in"),$e("out"),$e());(function(l,t){var e=1/t,i=2*e,n=2.5*e,s=function(o){return o<e?l*o*o:o<i?l*Math.pow(o-1.5/t,2)+.75:o<n?l*(o-=2.25/t)*o+.9375:l*Math.pow(o-2.625/t,2)+.984375};$t("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);$t("Expo",function(l){return Math.pow(2,10*(l-1))*l+l*l*l*l*l*l*(1-l)});$t("Circ",function(l){return-(sn(1-l*l)-1)});$t("Sine",function(l){return l===1?1:-_s(l*gs)+1});$t("Back",Ge("in"),Ge("out"),Ge());k.SteppedEase=k.steps=ot.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,a=1-R;return function(o){return((n*me(0,a,o)|0)+s)*i}}};Zt.ease=k["quad.out"];Z("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(l){return _i+=l+","+l+"Params,"});var Ln=function(t,e){this.id=ps++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:dn,this.set=e?e.getSetter:bi},ge=function(){function l(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Jt(this,+e.duration,1,1),this.data=e.data,L&&(this._ctx=L,L.data.push(this)),fe||it.wake()}var t=l.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Jt(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(te(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ze(this,i),!s._dp||s.parent||mn(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ft(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===R||!this._initted&&this._dur&&i||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),fn(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Li(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Li(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Kt(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-R?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?ke(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-R?0:this._rts,this.totalTime(me(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),Fe(this),Ms(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(te(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==R&&(this._tTime-=R)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=F(i);var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&ft(n,this,this._start-this._delay),this}return this._start},t.endTime=function(i){return this._start+(j(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ke(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Ps);var n=q;return q=i,yi(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),q=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Fi(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Fi(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(ht(this,i),j(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,j(n)),this._dur||(this._zTime=-R),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-R:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-R,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-R)},t.eventCallback=function(i,n,s){var a=this.vars;return arguments.length>1?(n?(a[i]=n,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},t.then=function(i){var n=this,s=n._prom;return new Promise(function(a){var o=W(i)?i:pn,c=function(){var d=n.then;n.then=null,s&&s(),W(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=d),a(o),n.then=d};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?c():n._prom=c})},t.kill=function(){re(this)},l}();at(ge.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-R,_prom:0,_ps:!1,_rts:1});var X=function(l){nn(t,l);function t(i,n){var s;return i===void 0&&(i={}),s=l.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=j(i.sortChildren),z&&ft(i.parent||z,yt(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&yn(yt(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,a){return he(0,arguments,this),this},e.from=function(n,s,a){return he(1,arguments,this),this},e.fromTo=function(n,s,a,o){return he(2,arguments,this),this},e.set=function(n,s,a){return s.duration=0,s.parent=this,ae(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new G(n,s,ht(this,a),1),this},e.call=function(n,s,a){return ft(this,G.delayedCall(0,n,s),a)},e.staggerTo=function(n,s,a,o,c,u,d){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=u,a.onCompleteParams=d,a.parent=this,new G(n,a,ht(this,c)),this},e.staggerFrom=function(n,s,a,o,c,u,d){return a.runBackwards=1,ae(a).immediateRender=j(a.immediateRender),this.staggerTo(n,s,a,o,c,u,d)},e.staggerFromTo=function(n,s,a,o,c,u,d,_){return o.startAt=a,ae(o).immediateRender=j(o.immediateRender),this.staggerTo(n,s,o,c,u,d,_)},e.render=function(n,s,a){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,u=this._dur,d=n<=0?0:F(n),_=this._zTime<0!=n<0&&(this._initted||!u),x,w,b,g,P,S,T,v,r,h,f,p;if(this!==z&&d>c&&n>=0&&(d=c),d!==this._tTime||a||_){if(o!==this._time&&u&&(d+=this._time-o,n+=this._time-o),x=d,r=this._start,v=this._ts,S=!v,_&&(u||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(f=this._yoyo,P=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(P*100+n,s,a);if(x=F(d%P),d===c?(g=this._repeat,x=u):(h=F(d/P),g=~~h,g&&g===h&&(x=u,g--),x>u&&(x=u)),h=Kt(this._tTime,P),!o&&this._tTime&&h!==g&&this._tTime-h*P-this._dur<=0&&(h=g),f&&g&1&&(x=u-x,p=1),g!==h&&!this._lock){var m=f&&h&1,y=m===(f&&g&1);if(g<h&&(m=!m),o=m?0:d%u?u:d,this._lock=1,this.render(o||(p?0:F(g*P)),s,!u)._lock=0,this._tTime=d,!s&&this.parent&&nt(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1,h=g),o&&o!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,c=this._tDur,y&&(this._lock=2,o=m?u:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;Rn(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=As(this,F(o),F(x)),T&&(d-=x-(x=T._start))),this._tTime=d,this._time=x,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&d&&u&&!s&&!h&&(nt(this,"onStart"),this._tTime!==d))return this;if(x>=o&&n>=0)for(w=this._first;w;){if(b=w._next,(w._act||x>=w._start)&&w._ts&&T!==w){if(w.parent!==this)return this.render(n,s,a);if(w.render(w._ts>0?(x-w._start)*w._ts:(w._dirty?w.totalDuration():w._tDur)+(x-w._start)*w._ts,s,a),x!==this._time||!this._ts&&!S){T=0,b&&(d+=this._zTime=-R);break}}w=b}else{w=this._last;for(var C=n<0?n:x;w;){if(b=w._prev,(w._act||C<=w._end)&&w._ts&&T!==w){if(w.parent!==this)return this.render(n,s,a);if(w.render(w._ts>0?(C-w._start)*w._ts:(w._dirty?w.totalDuration():w._tDur)+(C-w._start)*w._ts,s,a||q&&yi(w)),x!==this._time||!this._ts&&!S){T=0,b&&(d+=this._zTime=C?-R:R);break}}w=b}}if(T&&!s&&(this.pause(),T.render(x>=o?0:-R)._zTime=x>=o?1:-1,this._ts))return this._start=r,Fe(this),this.render(n,s,a);this._onUpdate&&!s&&nt(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&o)&&(r===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Mt(this,1),!s&&!(n<0&&!o)&&(d||o||!c)&&(nt(this,d===c&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var a=this;if(wt(s)||(s=ht(this,s,n)),!(n instanceof ge)){if(Y(n))return n.forEach(function(o){return a.add(o,s)}),this;if(V(n))return this.addLabel(n,s);if(W(n))n=G.delayedCall(0,n);else return this}return this!==n?ft(this,n,s):this},e.getChildren=function(n,s,a,o){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-lt);for(var c=[],u=this._first;u;)u._start>=o&&(u instanceof G?s&&c.push(u):(a&&c.push(u),n&&c.push.apply(c,u.getChildren(!0,s,a)))),u=u._next;return c},e.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},e.remove=function(n){return V(n)?this.removeLabel(n):W(n)?this.killTweensOf(n):(n.parent===this&&Le(this,n),n===this._recent&&(this._recent=this._last),Bt(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=F(it.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),l.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=ht(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,a){var o=G.delayedCall(0,s||ue,a);return o.data="isPause",this._hasPause=1,ft(this,o,ht(this,n))},e.removePause=function(n){var s=this._first;for(n=ht(this,n);s;)s._start===n&&s.data==="isPause"&&Mt(s),s=s._next},e.killTweensOf=function(n,s,a){for(var o=this.getTweensOf(n,a),c=o.length;c--;)bt!==o[c]&&o[c].kill(n,s);return this},e.getTweensOf=function(n,s){for(var a=[],o=ct(n),c=this._first,u=wt(s),d;c;)c instanceof G?Ss(c._targets,o)&&(u?(!bt||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(d=c.getTweensOf(o,s)).length&&a.push.apply(a,d),c=c._next;return a},e.tweenTo=function(n,s){s=s||{};var a=this,o=ht(a,n),c=s,u=c.startAt,d=c.onStart,_=c.onStartParams,x=c.immediateRender,w,b=G.to(a,at({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale())||R,onStart:function(){if(a.pause(),!w){var P=s.duration||Math.abs((o-(u&&"time"in u?u.time:a._time))/a.timeScale());b._dur!==P&&Jt(b,P,0,1).render(b._time,!0,!0),w=1}d&&d.apply(b,_||[])}},s));return x?b.render(0):b},e.tweenFromTo=function(n,s,a){return this.tweenTo(s,at({startAt:{time:ht(this,n)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),zi(this,ht(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),zi(this,ht(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+R)},e.shiftChildren=function(n,s,a){a===void 0&&(a=0);var o=this._first,c=this.labels,u;for(n=F(n);o;)o._start>=a&&(o._start+=n,o._end+=n),o=o._next;if(s)for(u in c)c[u]>=a&&(c[u]+=n);return Bt(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return l.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Bt(this)},e.totalDuration=function(n){var s=0,a=this,o=a._last,c=lt,u,d,_;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(_=a.parent;o;)u=o._prev,o._dirty&&o.totalDuration(),d=o._start,d>c&&a._sort&&o._ts&&!a._lock?(a._lock=1,ft(a,o,d-o._delay,1)._lock=0):c=d,d<0&&o._ts&&(s-=d,(!_&&!a._dp||_&&_.smoothChildTiming)&&(a._start+=F(d/a._ts),a._time-=d,a._tTime-=d),a.shiftChildren(-d,!1,-1/0),c=0),o._end>s&&o._ts&&(s=o._end),o=u;Jt(a,a===z&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(n){if(z._ts&&(fn(z,ke(n,z)),un=it.frame),it.frame>=Ri){Ri+=rt.autoSleep||120;var s=z._first;if((!s||!s._ts)&&rt.autoSleep&&it._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||it.sleep()}}},t}(ge);at(X.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ys=function(t,e,i,n,s,a,o){var c=new Q(this._pt,t,e,0,1,$n,null,s),u=0,d=0,_,x,w,b,g,P,S,T;for(c.b=i,c.e=n,i+="",n+="",(S=~n.indexOf("random("))&&(n=de(n)),a&&(T=[i,n],a(T,t,e),i=T[0],n=T[1]),x=i.match(Be)||[];_=Be.exec(n);)b=_[0],g=n.substring(u,_.index),w?w=(w+1)%5:g.substr(-5)==="rgba("&&(w=1),b!==x[d++]&&(P=parseFloat(x[d-1])||0,c._pt={_next:c._pt,p:g||d===1?g:",",s:P,c:b.charAt(1)==="="?Yt(P,b)-P:parseFloat(b)-P,m:w&&w<4?Math.round:0},u=Be.lastIndex);return c.c=u<n.length?n.substring(u,n.length):"",c.fp=o,(an.test(n)||S)&&(c.e=0),this._pt=c,c},xi=function(t,e,i,n,s,a,o,c,u,d){W(n)&&(n=n(s||0,t,a));var _=t[e],x=i!=="get"?i:W(_)?u?t[e.indexOf("set")||!W(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():_,w=W(_)?u?Ks:Wn:vi,b;if(V(n)&&(~n.indexOf("random(")&&(n=de(n)),n.charAt(1)==="="&&(b=Yt(x,n)+(U(x)||0),(b||b===0)&&(n=b))),!d||x!==n||ii)return!isNaN(x*n)&&n!==""?(b=new Q(this._pt,t,e,+x||0,n-(x||0),typeof _=="boolean"?tr:Hn,0,w),u&&(b.fp=u),o&&b.modifier(o,this,t),this._pt=b):(!_&&!(e in t)&&gi(e,n),Ys.call(this,t,e,x,n,w,c||rt.stringFilter,u))},Xs=function(t,e,i,n,s){if(W(t)&&(t=le(t,s,e,i,n)),!_t(t)||t.style&&t.nodeType||Y(t)||rn(t))return V(t)?le(t,s,e,i,n):t;var a={},o;for(o in t)a[o]=le(t[o],s,e,i,n);return a},Fn=function(t,e,i,n,s,a){var o,c,u,d;if(et[t]&&(o=new et[t]).init(s,o.rawVars?e[t]:Xs(e[t],n,s,a,i),i,n,a)!==!1&&(i._pt=c=new Q(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==qt))for(u=i._ptLookup[i._targets.indexOf(s)],d=o._props.length;d--;)u[o._props[d]]=c;return o},bt,ii,wi=function l(t,e,i){var n=t.vars,s=n.ease,a=n.startAt,o=n.immediateRender,c=n.lazy,u=n.onUpdate,d=n.runBackwards,_=n.yoyoEase,x=n.keyframes,w=n.autoRevert,b=t._dur,g=t._startAt,P=t._targets,S=t.parent,T=S&&S.data==="nested"?S.vars.targets:P,v=t._overwrite==="auto"&&!ci,r=t.timeline,h,f,p,m,y,C,M,E,D,A,O,$,N;if(r&&(!x||!s)&&(s="none"),t._ease=Wt(s,Zt.ease),t._yEase=_?In(Wt(_===!0?s:_,Zt.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!r&&!!n.runBackwards,!r||x&&!n.stagger){if(E=P[0]?zt(P[0]).harness:0,$=E&&n[E.prop],h=De(n,pi),g&&(g._zTime<0&&g.progress(1),e<0&&d&&o&&!w?g.render(-1,!0):g.revert(d&&b?be:bs),g._lazy=0),a){if(Mt(t._startAt=G.set(P,at({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!g&&j(c),startAt:null,delay:0,onUpdate:u&&function(){return nt(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(q||!o&&!w)&&t._startAt.revert(be),o&&b&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(d&&b&&!g){if(e&&(o=!1),p=at({overwrite:!1,data:"isFromStart",lazy:o&&!g&&j(c),immediateRender:o,stagger:0,parent:S},h),$&&(p[E.prop]=$),Mt(t._startAt=G.set(P,p)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(q?t._startAt.revert(be):t._startAt.render(-1,!0)),t._zTime=e,!o)l(t._startAt,R,R);else if(!e)return}for(t._pt=t._ptCache=0,c=b&&j(c)||c&&!b,f=0;f<P.length;f++){if(y=P[f],M=y._gsap||mi(P)[f]._gsap,t._ptLookup[f]=A={},Ze[M.id]&&Tt.length&&Ee(),O=T===P?f:T.indexOf(y),E&&(D=new E).init(y,$||h,t,O,T)!==!1&&(t._pt=m=new Q(t._pt,y,D.name,0,1,D.render,D,0,D.priority),D._props.forEach(function(ut){A[ut]=m}),D.priority&&(C=1)),!E||$)for(p in h)et[p]&&(D=Fn(p,h,t,O,y,T))?D.priority&&(C=1):A[p]=m=xi.call(t,y,p,"get",h[p],O,T,0,n.stringFilter);t._op&&t._op[f]&&t.kill(y,t._op[f]),v&&t._pt&&(bt=t,z.killTweensOf(y,A,t.globalTime(e)),N=!t.parent,bt=0),t._pt&&c&&(Ze[M.id]=1)}C&&Gn(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!N,x&&e<=0&&r.render(lt,!0,!0)},js=function(t,e,i,n,s,a,o,c){var u=(t._pt&&t._ptCache||(t._ptCache={}))[e],d,_,x,w;if(!u)for(u=t._ptCache[e]=[],x=t._ptLookup,w=t._targets.length;w--;){if(d=x[w][e],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==e&&d.fp!==e;)d=d._next;if(!d)return ii=1,t.vars[e]="+=0",wi(t,o),ii=0,c?ce(e+" not eligible for reset"):1;u.push(d)}for(w=u.length;w--;)_=u[w],d=_._pt||_,d.s=(n||n===0)&&!s?n:d.s+(n||0)+a*d.c,d.c=i-d.s,_.e&&(_.e=H(i)+U(_.e)),_.b&&(_.b=d.s+U(_.b))},Zs=function(t,e){var i=t[0]?zt(t[0]).harness:0,n=i&&i.aliases,s,a,o,c;if(!n)return e;s=Qt({},e);for(a in n)if(a in s)for(c=n[a].split(","),o=c.length;o--;)s[c[o]]=s[a];return s},Qs=function(t,e,i,n){var s=e.ease||n||"power1.inOut",a,o;if(Y(e))o=i[t]||(i[t]=[]),e.forEach(function(c,u){return o.push({t:u/(e.length-1)*100,v:c,e:s})});else for(a in e)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:e[a],e:s})},le=function(t,e,i,n,s){return W(t)?t.call(e,i,n,s):V(t)&&~t.indexOf("random(")?de(t):t},zn=_i+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Bn={};Z(zn+",id,stagger,delay,duration,paused,scrollTrigger",function(l){return Bn[l]=1});var G=function(l){nn(t,l);function t(i,n,s,a){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=l.call(this,a?n:ae(n))||this;var c=o.vars,u=c.duration,d=c.delay,_=c.immediateRender,x=c.stagger,w=c.overwrite,b=c.keyframes,g=c.defaults,P=c.scrollTrigger,S=c.yoyoEase,T=n.parent||z,v=(Y(i)||rn(i)?wt(i[0]):"length"in n)?[i]:ct(i),r,h,f,p,m,y,C,M;if(o._targets=v.length?mi(v):ce("GSAP target "+i+" not found. https://gsap.com",!rt.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=w,b||x||xe(u)||xe(d)){if(n=o.vars,r=o.timeline=new X({data:"nested",defaults:g||{},targets:T&&T.data==="nested"?T.vars.targets:v}),r.kill(),r.parent=r._dp=yt(o),r._start=0,x||xe(u)||xe(d)){if(p=v.length,C=x&&bn(x),_t(x))for(m in x)~zn.indexOf(m)&&(M||(M={}),M[m]=x[m]);for(h=0;h<p;h++)f=De(n,Bn),f.stagger=0,S&&(f.yoyoEase=S),M&&Qt(f,M),y=v[h],f.duration=+le(u,yt(o),h,y,v),f.delay=(+le(d,yt(o),h,y,v)||0)-o._delay,!x&&p===1&&f.delay&&(o._delay=d=f.delay,o._start+=d,f.delay=0),r.to(y,f,C?C(h,y,v):0),r._ease=k.none;r.duration()?u=d=0:o.timeline=0}else if(b){ae(at(r.vars.defaults,{ease:"none"})),r._ease=Wt(b.ease||n.ease||"none");var E=0,D,A,O;if(Y(b))b.forEach(function($){return r.to(v,$,">")}),r.duration();else{f={};for(m in b)m==="ease"||m==="easeEach"||Qs(m,b[m],f,b.easeEach);for(m in f)for(D=f[m].sort(function($,N){return $.t-N.t}),E=0,h=0;h<D.length;h++)A=D[h],O={ease:A.e,duration:(A.t-(h?D[h-1].t:0))/100*u},O[m]=A.v,r.to(v,O,E),E+=O.duration;r.duration()<u&&r.to({},{duration:u-r.duration()})}}u||o.duration(u=r.duration())}else o.timeline=0;return w===!0&&!ci&&(bt=yt(o),z.killTweensOf(v),bt=0),ft(T,yt(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(_||!u&&!b&&o._start===F(T._time)&&j(_)&&Es(yt(o))&&T.data!=="nested")&&(o._tTime=-R,o.render(Math.max(0,-d)||0)),P&&yn(yt(o),P),o}var e=t.prototype;return e.render=function(n,s,a){var o=this._time,c=this._tDur,u=this._dur,d=n<0,_=n>c-R&&!d?c:n<R?0:n,x,w,b,g,P,S,T,v,r;if(!u)ks(this,n,s,a);else if(_!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(x=_,v=this.timeline,this._repeat){if(g=u+this._rDelay,this._repeat<-1&&d)return this.totalTime(g*100+n,s,a);if(x=F(_%g),_===c?(b=this._repeat,x=u):(P=F(_/g),b=~~P,b&&b===P?(x=u,b--):x>u&&(x=u)),S=this._yoyo&&b&1,S&&(r=this._yEase,x=u-x),P=Kt(this._tTime,g),x===o&&!a&&this._initted&&b===P)return this._tTime=_,this;b!==P&&(v&&this._yEase&&Rn(v,S),this.vars.repeatRefresh&&!S&&!this._lock&&x!==g&&this._initted&&(this._lock=a=1,this.render(F(g*b),!0).invalidate()._lock=0))}if(!this._initted){if(xn(this,d?n:x,a,s,_))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&b!==P))return this;if(u!==this._dur)return this.render(n,s,a)}if(this._tTime=_,this._time=x,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(r||this._ease)(x/u),this._from&&(this.ratio=T=1-T),!o&&_&&!s&&!P&&(nt(this,"onStart"),this._tTime!==_))return this;for(w=this._pt;w;)w.r(T,w.d),w=w._next;v&&v.render(n<0?n:v._dur*v._ease(x/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(d&&Qe(this,n,s,a),nt(this,"onUpdate")),this._repeat&&b!==P&&this.vars.onRepeat&&!s&&this.parent&&nt(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(d&&!this._onUpdate&&Qe(this,n,!0,!0),(n||!u)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Mt(this,1),!s&&!(d&&!o)&&(_||o||S)&&(nt(this,_===c?"onComplete":"onReverseComplete",!0),this._prom&&!(_<c&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),l.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,a,o,c){fe||it.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||wi(this,u),d=this._ease(u/this._dur),js(this,n,s,a,o,d,u,c)?this.resetTo(n,s,a,o,1):(ze(this,0),this.parent||_n(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?re(this):this.scrollTrigger&&this.scrollTrigger.kill(!!q),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,bt&&bt.vars.overwrite!==!0)._first||re(this),this.parent&&a!==this.timeline.totalDuration()&&Jt(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,c=n?ct(n):o,u=this._ptLookup,d=this._pt,_,x,w,b,g,P,S;if((!s||s==="all")&&Cs(o,c))return s==="all"&&(this._pt=0),re(this);for(_=this._op=this._op||[],s!=="all"&&(V(s)&&(g={},Z(s,function(T){return g[T]=1}),s=g),s=Zs(o,s)),S=o.length;S--;)if(~c.indexOf(o[S])){x=u[S],s==="all"?(_[S]=s,b=x,w={}):(w=_[S]=_[S]||{},b=s);for(g in b)P=x&&x[g],P&&((!("kill"in P.d)||P.d.kill(g)===!0)&&Le(this,P,"_pt"),delete x[g]),w!=="all"&&(w[g]=1)}return this._initted&&!this._pt&&d&&re(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return he(1,arguments)},t.delayedCall=function(n,s,a,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(n,s,a){return he(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,a){return z.killTweensOf(n,s,a)},t}(ge);at(G.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Z("staggerTo,staggerFrom,staggerFromTo",function(l){G[l]=function(){var t=new X,e=Je.call(arguments,0);return e.splice(l==="staggerFromTo"?5:4,0,0),t[l].apply(t,e)}});var vi=function(t,e,i){return t[e]=i},Wn=function(t,e,i){return t[e](i)},Ks=function(t,e,i,n){return t[e](n.fp,i)},Js=function(t,e,i){return t.setAttribute(e,i)},bi=function(t,e){return W(t[e])?Wn:ui(t[e])&&t.setAttribute?Js:vi},Hn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},tr=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},$n=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Pi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},er=function(t,e,i,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(t,e,i),s=a},ir=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?Le(this,e,"_pt"):e.dep||(i=1),e=n;return!i},nr=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},Gn=function(t){for(var e=t._pt,i,n,s,a;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:a)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:a=e,e=i}t._pt=s},Q=function(){function l(e,i,n,s,a,o,c,u,d){this.t=i,this.s=s,this.c=a,this.p=n,this.r=o||Hn,this.d=c||this,this.set=u||vi,this.pr=d||0,this._next=e,e&&(e._prev=this)}var t=l.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=nr,this.m=i,this.mt=s,this.tween=n},l}();Z(_i+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(l){return pi[l]=1});ot.TweenMax=ot.TweenLite=G;ot.TimelineLite=ot.TimelineMax=X;z=new X({sortChildren:!1,defaults:Zt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});rt.stringFilter=An;var Ht=[],Se={},sr=[],Wi=0,rr=0,Ne=function(t){return(Se[t]||sr).map(function(e){return e()})},ni=function(){var t=Date.now(),e=[];t-Wi>2&&(Ne("matchMediaInit"),Ht.forEach(function(i){var n=i.queries,s=i.conditions,a,o,c,u;for(o in n)a=dt.matchMedia(n[o]).matches,a&&(c=1),a!==s[o]&&(s[o]=a,u=1);u&&(i.revert(),c&&e.push(i))}),Ne("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Wi=t,Ne("matchMedia"))},Nn=function(){function l(e,i){this.selector=i&&ti(i),this.data=[],this._r=[],this.isReverted=!1,this.id=rr++,e&&this.add(e)}var t=l.prototype;return t.add=function(i,n,s){W(i)&&(s=n,n=i,i=W);var a=this,o=function(){var u=L,d=a.selector,_;return u&&u!==a&&u.data.push(a),s&&(a.selector=ti(s)),L=a,_=n.apply(a,arguments),W(_)&&a._r.push(_),L=u,a.selector=d,a.isReverted=!1,_};return a.last=o,i===W?o(a,function(c){return a.add(null,c)}):i?a[i]=o:o},t.ignore=function(i){var n=L;L=null,i(this),L=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof l?i.push.apply(i,n.getTweens()):n instanceof G&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var o=s.getTweens(),c=s.data.length,u;c--;)u=s.data[c],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(d){return o.splice(o.indexOf(d),1)}));for(o.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,_){return _.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),c=s.data.length;c--;)u=s.data[c],u instanceof X?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof G)&&u.revert&&u.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),n)for(var a=Ht.length;a--;)Ht[a].id===this.id&&Ht.splice(a,1)},t.revert=function(i){this.kill(i||{})},l}(),or=function(){function l(e){this.contexts=[],this.scope=e,L&&L.data.push(this)}var t=l.prototype;return t.add=function(i,n,s){_t(i)||(i={matches:i});var a=new Nn(0,s||this.scope),o=a.conditions={},c,u,d;L&&!a.selector&&(a.selector=L.selector),this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(u in i)u==="all"?d=1:(c=dt.matchMedia(i[u]),c&&(Ht.indexOf(a)<0&&Ht.push(a),(o[u]=c.matches)&&(d=1),c.addListener?c.addListener(ni):c.addEventListener("change",ni)));return d&&n(a,function(_){return a.add(null,_)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},l}(),Ae={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return En(n)})},timeline:function(t){return new X(t)},getTweensOf:function(t,e){return z.getTweensOf(t,e)},getProperty:function(t,e,i,n){V(t)&&(t=ct(t)[0]);var s=zt(t||{}).get,a=i?pn:gn;return i==="native"&&(i=""),t&&(e?a((et[e]&&et[e].get||s)(t,e,i,n)):function(o,c,u){return a((et[o]&&et[o].get||s)(t,o,c,u))})},quickSetter:function(t,e,i){if(t=ct(t),t.length>1){var n=t.map(function(d){return tt.quickSetter(d,e,i)}),s=n.length;return function(d){for(var _=s;_--;)n[_](d)}}t=t[0]||{};var a=et[e],o=zt(t),c=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(d){var _=new a;qt._pt=0,_.init(t,i?d+i:d,qt,0,[t]),_.render(1,_),qt._pt&&Pi(1,qt)}:o.set(t,c);return a?u:function(d){return u(t,c,i?d+i:d,o,1)}},quickTo:function(t,e,i){var n,s=tt.to(t,at((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),a=function(c,u,d){return s.resetTo(e,c,u,d)};return a.tween=s,a},isTweening:function(t){return z.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Wt(t.ease,Zt.ease)),Oi(Zt,t||{})},config:function(t){return Oi(rt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!et[o]&&!ot[o]&&ce(e+" effect requires "+o+" plugin.")}),We[e]=function(o,c,u){return i(ct(o),at(c||{},s),u)},a&&(X.prototype[e]=function(o,c,u){return this.add(We[e](o,_t(c)?c:(u=c)&&{},this),u)})},registerEase:function(t,e){k[t]=Wt(e)},parseEase:function(t,e){return arguments.length?Wt(t,e):k},getById:function(t){return z.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new X(t),n,s;for(i.smoothChildTiming=j(t.smoothChildTiming),z.remove(i),i._dp=0,i._time=i._tTime=z._time,n=z._first;n;)s=n._next,(e||!(!n._dur&&n instanceof G&&n.vars.onComplete===n._targets[0]))&&ft(i,n,n._start-n._delay),n=s;return ft(z,i,0),i},context:function(t,e){return t?new Nn(t,e):L},matchMedia:function(t){return new or(t)},matchMediaRefresh:function(){return Ht.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||ni()},addEventListener:function(t,e){var i=Se[t]||(Se[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Se[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Bs,wrapYoyo:Ws,distribute:bn,random:Sn,snap:Pn,normalize:zs,getUnit:U,clamp:Rs,splitColor:Dn,toArray:ct,selector:ti,mapRange:Cn,pipe:Ls,unitize:Fs,interpolate:Hs,shuffle:vn},install:ln,effects:We,ticker:it,updateRoot:X.updateRoot,plugins:et,globalTimeline:z,core:{PropTween:Q,globals:cn,Tween:G,Timeline:X,Animation:ge,getCache:zt,_removeLinkedListItem:Le,reverting:function(){return q},context:function(t){return t&&L&&(L.data.push(t),t._ctx=L),L},suppressOverwrites:function(t){return ci=t}}};Z("to,from,fromTo,delayedCall,set,killTweensOf",function(l){return Ae[l]=G[l]});it.add(X.updateRoot);qt=Ae.to({},{duration:0});var ar=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},hr=function(t,e){var i=t._targets,n,s,a;for(n in e)for(s=i.length;s--;)a=t._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=ar(a,n)),a&&a.modifier&&a.modifier(e[n],t,i[s],n))},Ve=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,a){a._onInit=function(o){var c,u;if(V(s)&&(c={},Z(s,function(d){return c[d]=1}),s=c),e){c={};for(u in s)c[u]=e(s[u]);s=c}hr(o,s)}}}},tt=Ae.registerPlugin({name:"attr",init:function(t,e,i,n,s){var a,o,c;this.tween=i;for(a in e)c=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(c||0)+"",e[a],n,s,0,0,a),o.op=a,o.b=c,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)q?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Ve("roundProps",ei),Ve("modifiers"),Ve("snap",Pn))||Ae;G.version=X.version=tt.version="3.14.2";hn=1;di()&&te();k.Power0;k.Power1;k.Power2;k.Power3;k.Power4;k.Linear;k.Quad;k.Cubic;k.Quart;k.Quint;k.Strong;k.Elastic;k.Back;k.SteppedEase;k.Bounce;k.Sine;k.Expo;k.Circ;/*!
 * CSSPlugin 3.14.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Hi,Pt,Xt,Si,Ft,$i,Ti,lr=function(){return typeof window<"u"},vt={},Lt=180/Math.PI,jt=Math.PI/180,Gt=Math.atan2,Gi=1e8,Ci=/([A-Z])/g,cr=/(left|right|width|margin|padding|x)/i,ur=/[\s,\(]\S/,gt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},si=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},dr=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},fr=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},gr=function(t,e){return e.set(e.t,e.p,t===1?e.e:t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},pr=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Vn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},qn=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},_r=function(t,e,i){return t.style[e]=i},mr=function(t,e,i){return t.style.setProperty(e,i)},yr=function(t,e,i){return t._gsap[e]=i},xr=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},wr=function(t,e,i,n,s){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},vr=function(t,e,i,n,s){var a=t._gsap;a[e]=i,a.renderTransform(s,a)},B="transform",K=B+"Origin",br=function l(t,e){var i=this,n=this.target,s=n.style,a=n._gsap;if(t in vt&&s){if(this.tfm=this.tfm||{},t!=="transform")t=gt[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return i.tfm[o]=xt(n,o)}):this.tfm[t]=a.x?a[t]:xt(n,t),t===K&&(this.tfm.zOrigin=a.zOrigin);else return gt.transform.split(",").forEach(function(o){return l.call(i,o,e)});if(this.props.indexOf(B)>=0)return;a.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(K,e,"")),t=B}(s||e)&&this.props.push(t,e,s[t])},Un=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Pr=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,a;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Ci,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Ti(),(!s||!s.isStart)&&!i[B]&&(Un(i),n.zOrigin&&i[K]&&(i[K]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},Yn=function(t,e){var i={target:t,props:[],revert:Pr,save:br};return t._gsap||tt.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},Xn,ri=function(t,e){var i=Pt.createElementNS?Pt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Pt.createElement(t);return i&&i.style?i:Pt.createElement(t)},st=function l(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Ci,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&l(t,ee(e)||e,1)||""},Ni="O,Moz,ms,Ms,Webkit".split(","),ee=function(t,e,i){var n=e||Ft,s=n.style,a=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(Ni[a]+t in s););return a<0?null:(a===3?"ms":a>=0?Ni[a]:"")+t},oi=function(){lr()&&window.document&&(Hi=window,Pt=Hi.document,Xt=Pt.documentElement,Ft=ri("div")||{style:{}},ri("div"),B=ee(B),K=B+"Origin",Ft.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Xn=!!ee("perspective"),Ti=tt.core.reverting,Si=1)},Vi=function(t){var e=t.ownerSVGElement,i=ri("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),Xt.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),Xt.removeChild(i),s},qi=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},jn=function(t){var e,i;try{e=t.getBBox()}catch{e=Vi(t),i=1}return e&&(e.width||e.height)||i||(e=Vi(t)),e&&!e.width&&!e.x&&!e.y?{x:+qi(t,["x","cx","x1"])||0,y:+qi(t,["y","cy","y1"])||0,width:0,height:0}:e},Zn=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&jn(t))},Et=function(t,e){if(e){var i=t.style,n;e in vt&&e!==K&&(e=B),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(Ci,"-$1").toLowerCase())):i.removeAttribute(e)}},St=function(t,e,i,n,s,a){var o=new Q(t._pt,e,i,0,1,a?qn:Vn);return t._pt=o,o.b=n,o.e=s,t._props.push(i),o},Ui={deg:1,rad:1,turn:1},Sr={grid:1,flex:1},Dt=function l(t,e,i,n){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Ft.style,c=cr.test(e),u=t.tagName.toLowerCase()==="svg",d=(u?"client":"offset")+(c?"Width":"Height"),_=100,x=n==="px",w=n==="%",b,g,P,S;if(n===a||!s||Ui[n]||Ui[a])return s;if(a!=="px"&&!x&&(s=l(t,e,i,"px")),S=t.getCTM&&Zn(t),(w||a==="%")&&(vt[e]||~e.indexOf("adius")))return b=S?t.getBBox()[c?"width":"height"]:t[d],H(w?s/b*_:s/100*b);if(o[c?"width":"height"]=_+(x?a:n),g=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,S&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Pt||!g.appendChild)&&(g=Pt.body),P=g._gsap,P&&w&&P.width&&c&&P.time===it.time&&!P.uncache)return H(s/P.width*_);if(w&&(e==="height"||e==="width")){var T=t.style[e];t.style[e]=_+n,b=t[d],T?t.style[e]=T:Et(t,e)}else(w||a==="%")&&!Sr[st(g,"display")]&&(o.position=st(t,"position")),g===t&&(o.position="static"),g.appendChild(Ft),b=Ft[d],g.removeChild(Ft),o.position="absolute";return c&&w&&(P=zt(g),P.time=it.time,P.width=g[d]),H(x?b*s/_:b&&s?_/b*s:0)},xt=function(t,e,i,n){var s;return Si||oi(),e in gt&&e!=="transform"&&(e=gt[e],~e.indexOf(",")&&(e=e.split(",")[0])),vt[e]&&e!=="transform"?(s=_e(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Re(st(t,K))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=Ie[e]&&Ie[e](t,e,i)||st(t,e)||dn(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Dt(t,e,s,i)+i:s},Tr=function(t,e,i,n){if(!i||i==="none"){var s=ee(e,t,1),a=s&&st(t,s,1);a&&a!==i?(e=s,i=a):e==="borderColor"&&(i=st(t,"borderTopColor"))}var o=new Q(this._pt,t.style,e,0,1,$n),c=0,u=0,d,_,x,w,b,g,P,S,T,v,r,h;if(o.b=i,o.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=st(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(g=t.style[e],t.style[e]=n,n=st(t,e)||n,g?t.style[e]=g:Et(t,e)),d=[i,n],An(d),i=d[0],n=d[1],x=i.match(Vt)||[],h=n.match(Vt)||[],h.length){for(;_=Vt.exec(n);)P=_[0],T=n.substring(c,_.index),b?b=(b+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(b=1),P!==(g=x[u++]||"")&&(w=parseFloat(g)||0,r=g.substr((w+"").length),P.charAt(1)==="="&&(P=Yt(w,P)+r),S=parseFloat(P),v=P.substr((S+"").length),c=Vt.lastIndex-v.length,v||(v=v||rt.units[e]||r,c===n.length&&(n+=v,o.e+=v)),r!==v&&(w=Dt(t,e,g,v)||0),o._pt={_next:o._pt,p:T||u===1?T:",",s:w,c:S-w,m:b&&b<4||e==="zIndex"?Math.round:0});o.c=c<n.length?n.substring(c,n.length):""}else o.r=e==="display"&&n==="none"?qn:Vn;return an.test(n)&&(o.e=0),this._pt=o,o},Yi={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Cr=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=Yi[i]||i,e[1]=Yi[n]||n,e.join(" ")},Mr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,a=i._gsap,o,c,u;if(s==="all"||s===!0)n.cssText="",c=1;else for(s=s.split(","),u=s.length;--u>-1;)o=s[u],vt[o]&&(c=1,o=o==="transformOrigin"?K:B),Et(i,o);c&&(Et(i,B),a&&(a.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",_e(i,1),a.uncache=1,Un(n)))}},Ie={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var a=t._pt=new Q(t._pt,e,i,0,0,Mr);return a.u=n,a.pr=-10,a.tween=s,t._props.push(i),1}}},pe=[1,0,0,1,0,0],Qn={},Kn=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Xi=function(t){var e=st(t,B);return Kn(e)?pe:e.substr(7).match(on).map(H)},Mi=function(t,e){var i=t._gsap||zt(t),n=t.style,s=Xi(t),a,o,c,u;return i.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?pe:s):(s===pe&&!t.offsetParent&&t!==Xt&&!i.svg&&(c=n.display,n.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,o=t.nextElementSibling,Xt.appendChild(t)),s=Xi(t),c?n.display=c:Et(t,"display"),u&&(o?a.insertBefore(t,o):a?a.appendChild(t):Xt.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},ai=function(t,e,i,n,s,a){var o=t._gsap,c=s||Mi(t,!0),u=o.xOrigin||0,d=o.yOrigin||0,_=o.xOffset||0,x=o.yOffset||0,w=c[0],b=c[1],g=c[2],P=c[3],S=c[4],T=c[5],v=e.split(" "),r=parseFloat(v[0])||0,h=parseFloat(v[1])||0,f,p,m,y;i?c!==pe&&(p=w*P-b*g)&&(m=r*(P/p)+h*(-g/p)+(g*T-P*S)/p,y=r*(-b/p)+h*(w/p)-(w*T-b*S)/p,r=m,h=y):(f=jn(t),r=f.x+(~v[0].indexOf("%")?r/100*f.width:r),h=f.y+(~(v[1]||v[0]).indexOf("%")?h/100*f.height:h)),n||n!==!1&&o.smooth?(S=r-u,T=h-d,o.xOffset=_+(S*w+T*g)-S,o.yOffset=x+(S*b+T*P)-T):o.xOffset=o.yOffset=0,o.xOrigin=r,o.yOrigin=h,o.smooth=!!n,o.origin=e,o.originIsAbsolute=!!i,t.style[K]="0px 0px",a&&(St(a,o,"xOrigin",u,r),St(a,o,"yOrigin",d,h),St(a,o,"xOffset",_,o.xOffset),St(a,o,"yOffset",x,o.yOffset)),t.setAttribute("data-svg-origin",r+" "+h)},_e=function(t,e){var i=t._gsap||new Ln(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,a="px",o="deg",c=getComputedStyle(t),u=st(t,K)||"0",d,_,x,w,b,g,P,S,T,v,r,h,f,p,m,y,C,M,E,D,A,O,$,N,ut,ye,ie,ne,At,Ei,mt,It;return d=_=x=g=P=S=T=v=r=0,w=b=1,i.svg=!!(t.getCTM&&Zn(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(n[B]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[B]!=="none"?c[B]:"")),n.scale=n.rotate=n.translate="none"),p=Mi(t,i.svg),i.svg&&(i.uncache?(ut=t.getBBox(),u=i.xOrigin-ut.x+"px "+(i.yOrigin-ut.y)+"px",N=""):N=!e&&t.getAttribute("data-svg-origin"),ai(t,N||u,!!N||i.originIsAbsolute,i.smooth!==!1,p)),h=i.xOrigin||0,f=i.yOrigin||0,p!==pe&&(M=p[0],E=p[1],D=p[2],A=p[3],d=O=p[4],_=$=p[5],p.length===6?(w=Math.sqrt(M*M+E*E),b=Math.sqrt(A*A+D*D),g=M||E?Gt(E,M)*Lt:0,T=D||A?Gt(D,A)*Lt+g:0,T&&(b*=Math.abs(Math.cos(T*jt))),i.svg&&(d-=h-(h*M+f*D),_-=f-(h*E+f*A))):(It=p[6],Ei=p[7],ie=p[8],ne=p[9],At=p[10],mt=p[11],d=p[12],_=p[13],x=p[14],m=Gt(It,At),P=m*Lt,m&&(y=Math.cos(-m),C=Math.sin(-m),N=O*y+ie*C,ut=$*y+ne*C,ye=It*y+At*C,ie=O*-C+ie*y,ne=$*-C+ne*y,At=It*-C+At*y,mt=Ei*-C+mt*y,O=N,$=ut,It=ye),m=Gt(-D,At),S=m*Lt,m&&(y=Math.cos(-m),C=Math.sin(-m),N=M*y-ie*C,ut=E*y-ne*C,ye=D*y-At*C,mt=A*C+mt*y,M=N,E=ut,D=ye),m=Gt(E,M),g=m*Lt,m&&(y=Math.cos(m),C=Math.sin(m),N=M*y+E*C,ut=O*y+$*C,E=E*y-M*C,$=$*y-O*C,M=N,O=ut),P&&Math.abs(P)+Math.abs(g)>359.9&&(P=g=0,S=180-S),w=H(Math.sqrt(M*M+E*E+D*D)),b=H(Math.sqrt($*$+It*It)),m=Gt(O,$),T=Math.abs(m)>2e-4?m*Lt:0,r=mt?1/(mt<0?-mt:mt):0),i.svg&&(N=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Kn(st(t,B)),N&&t.setAttribute("transform",N))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(w*=-1,T+=g<=0?180:-180,g+=g<=0?180:-180):(b*=-1,T+=T<=0?180:-180)),e=e||i.uncache,i.x=d-((i.xPercent=d&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-d)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=_-((i.yPercent=_&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-_)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=x+a,i.scaleX=H(w),i.scaleY=H(b),i.rotation=H(g)+o,i.rotationX=H(P)+o,i.rotationY=H(S)+o,i.skewX=T+o,i.skewY=v+o,i.transformPerspective=r+a,(i.zOrigin=parseFloat(u.split(" ")[2])||!e&&i.zOrigin||0)&&(n[K]=Re(u)),i.xOffset=i.yOffset=0,i.force3D=rt.force3D,i.renderTransform=i.svg?Dr:Xn?Jn:Er,i.uncache=0,i},Re=function(t){return(t=t.split(" "))[0]+" "+t[1]},qe=function(t,e,i){var n=U(e);return H(parseFloat(e)+parseFloat(Dt(t,"x",i+"px",n)))+n},Er=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Jn(t,e)},Rt="0deg",se="0px",Ot=") ",Jn=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.z,u=i.rotation,d=i.rotationY,_=i.rotationX,x=i.skewX,w=i.skewY,b=i.scaleX,g=i.scaleY,P=i.transformPerspective,S=i.force3D,T=i.target,v=i.zOrigin,r="",h=S==="auto"&&t&&t!==1||S===!0;if(v&&(_!==Rt||d!==Rt)){var f=parseFloat(d)*jt,p=Math.sin(f),m=Math.cos(f),y;f=parseFloat(_)*jt,y=Math.cos(f),a=qe(T,a,p*y*-v),o=qe(T,o,-Math.sin(f)*-v),c=qe(T,c,m*y*-v+v)}P!==se&&(r+="perspective("+P+Ot),(n||s)&&(r+="translate("+n+"%, "+s+"%) "),(h||a!==se||o!==se||c!==se)&&(r+=c!==se||h?"translate3d("+a+", "+o+", "+c+") ":"translate("+a+", "+o+Ot),u!==Rt&&(r+="rotate("+u+Ot),d!==Rt&&(r+="rotateY("+d+Ot),_!==Rt&&(r+="rotateX("+_+Ot),(x!==Rt||w!==Rt)&&(r+="skew("+x+", "+w+Ot),(b!==1||g!==1)&&(r+="scale("+b+", "+g+Ot),T.style[B]=r||"translate(0, 0)"},Dr=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.rotation,u=i.skewX,d=i.skewY,_=i.scaleX,x=i.scaleY,w=i.target,b=i.xOrigin,g=i.yOrigin,P=i.xOffset,S=i.yOffset,T=i.forceCSS,v=parseFloat(a),r=parseFloat(o),h,f,p,m,y;c=parseFloat(c),u=parseFloat(u),d=parseFloat(d),d&&(d=parseFloat(d),u+=d,c+=d),c||u?(c*=jt,u*=jt,h=Math.cos(c)*_,f=Math.sin(c)*_,p=Math.sin(c-u)*-x,m=Math.cos(c-u)*x,u&&(d*=jt,y=Math.tan(u-d),y=Math.sqrt(1+y*y),p*=y,m*=y,d&&(y=Math.tan(d),y=Math.sqrt(1+y*y),h*=y,f*=y)),h=H(h),f=H(f),p=H(p),m=H(m)):(h=_,m=x,f=p=0),(v&&!~(a+"").indexOf("px")||r&&!~(o+"").indexOf("px"))&&(v=Dt(w,"x",a,"px"),r=Dt(w,"y",o,"px")),(b||g||P||S)&&(v=H(v+b-(b*h+g*p)+P),r=H(r+g-(b*f+g*m)+S)),(n||s)&&(y=w.getBBox(),v=H(v+n/100*y.width),r=H(r+s/100*y.height)),y="matrix("+h+","+f+","+p+","+m+","+v+","+r+")",w.setAttribute("transform",y),T&&(w.style[B]=y)},kr=function(t,e,i,n,s){var a=360,o=V(s),c=parseFloat(s)*(o&&~s.indexOf("rad")?Lt:1),u=c-n,d=n+u+"deg",_,x;return o&&(_=s.split("_")[1],_==="short"&&(u%=a,u!==u%(a/2)&&(u+=u<0?a:-a)),_==="cw"&&u<0?u=(u+a*Gi)%a-~~(u/a)*a:_==="ccw"&&u>0&&(u=(u-a*Gi)%a-~~(u/a)*a)),t._pt=x=new Q(t._pt,e,i,n,u,dr),x.e=d,x.u="deg",t._props.push(i),x},ji=function(t,e){for(var i in e)t[i]=e[i];return t},Ar=function(t,e,i){var n=ji({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,c,u,d,_,x,w,b;n.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),a[B]=e,o=_e(i,1),Et(i,B),i.setAttribute("transform",u)):(u=getComputedStyle(i)[B],a[B]=e,o=_e(i,1),a[B]=u);for(c in vt)u=n[c],d=o[c],u!==d&&s.indexOf(c)<0&&(w=U(u),b=U(d),_=w!==b?Dt(i,c,u,b):parseFloat(u),x=parseFloat(d),t._pt=new Q(t._pt,o,c,_,x-_,si),t._pt.u=b||0,t._props.push(c));ji(o,n)};Z("padding,margin,Width,Radius",function(l,t){var e="Top",i="Right",n="Bottom",s="Left",a=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(o){return t<2?l+o:"border"+o+l});Ie[t>1?"border"+l:l]=function(o,c,u,d,_){var x,w;if(arguments.length<4)return x=a.map(function(b){return xt(o,b,u)}),w=x.join(" "),w.split(x[0]).length===5?x[0]:w;x=(d+"").split(" "),w={},a.forEach(function(b,g){return w[b]=x[g]=x[g]||x[(g-1)/2|0]}),o.init(c,w,_)}});var ts={name:"css",register:oi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var a=this._props,o=t.style,c=i.vars.startAt,u,d,_,x,w,b,g,P,S,T,v,r,h,f,p,m,y;Si||oi(),this.styles=this.styles||Yn(t),m=this.styles.props,this.tween=i;for(g in e)if(g!=="autoRound"&&(d=e[g],!(et[g]&&Fn(g,e,i,n,t,s)))){if(w=typeof d,b=Ie[g],w==="function"&&(d=d.call(i,n,t,s),w=typeof d),w==="string"&&~d.indexOf("random(")&&(d=de(d)),b)b(this,t,g,d,i)&&(p=1);else if(g.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(g)+"").trim(),d+="",Ct.lastIndex=0,Ct.test(u)||(P=U(u),S=U(d),S?P!==S&&(u=Dt(t,g,u,S)+S):P&&(d+=P)),this.add(o,"setProperty",u,d,n,s,0,0,g),a.push(g),m.push(g,0,o[g]);else if(w!=="undefined"){if(c&&g in c?(u=typeof c[g]=="function"?c[g].call(i,n,t,s):c[g],V(u)&&~u.indexOf("random(")&&(u=de(u)),U(u+"")||u==="auto"||(u+=rt.units[g]||U(xt(t,g))||""),(u+"").charAt(1)==="="&&(u=xt(t,g))):u=xt(t,g),x=parseFloat(u),T=w==="string"&&d.charAt(1)==="="&&d.substr(0,2),T&&(d=d.substr(2)),_=parseFloat(d),g in gt&&(g==="autoAlpha"&&(x===1&&xt(t,"visibility")==="hidden"&&_&&(x=0),m.push("visibility",0,o.visibility),St(this,o,"visibility",x?"inherit":"hidden",_?"inherit":"hidden",!_)),g!=="scale"&&g!=="transform"&&(g=gt[g],~g.indexOf(",")&&(g=g.split(",")[0]))),v=g in vt,v){if(this.styles.save(g),y=d,w==="string"&&d.substring(0,6)==="var(--"){if(d=st(t,d.substring(4,d.indexOf(")"))),d.substring(0,5)==="calc("){var C=t.style.perspective;t.style.perspective=d,d=st(t,"perspective"),C?t.style.perspective=C:Et(t,"perspective")}_=parseFloat(d)}if(r||(h=t._gsap,h.renderTransform&&!e.parseTransform||_e(t,e.parseTransform),f=e.smoothOrigin!==!1&&h.smooth,r=this._pt=new Q(this._pt,o,B,0,1,h.renderTransform,h,0,-1),r.dep=1),g==="scale")this._pt=new Q(this._pt,h,"scaleY",h.scaleY,(T?Yt(h.scaleY,T+_):_)-h.scaleY||0,si),this._pt.u=0,a.push("scaleY",g),g+="X";else if(g==="transformOrigin"){m.push(K,0,o[K]),d=Cr(d),h.svg?ai(t,d,0,f,0,this):(S=parseFloat(d.split(" ")[2])||0,S!==h.zOrigin&&St(this,h,"zOrigin",h.zOrigin,S),St(this,o,g,Re(u),Re(d)));continue}else if(g==="svgOrigin"){ai(t,d,1,f,0,this);continue}else if(g in Qn){kr(this,h,g,x,T?Yt(x,T+d):d);continue}else if(g==="smoothOrigin"){St(this,h,"smooth",h.smooth,d);continue}else if(g==="force3D"){h[g]=d;continue}else if(g==="transform"){Ar(this,d,t);continue}}else g in o||(g=ee(g)||g);if(v||(_||_===0)&&(x||x===0)&&!ur.test(d)&&g in o)P=(u+"").substr((x+"").length),_||(_=0),S=U(d)||(g in rt.units?rt.units[g]:P),P!==S&&(x=Dt(t,g,u,S)),this._pt=new Q(this._pt,v?h:o,g,x,(T?Yt(x,T+_):_)-x,!v&&(S==="px"||g==="zIndex")&&e.autoRound!==!1?pr:si),this._pt.u=S||0,v&&y!==d?(this._pt.b=u,this._pt.e=y,this._pt.r=gr):P!==S&&S!=="%"&&(this._pt.b=u,this._pt.r=fr);else if(g in o)Tr.call(this,t,g,u,T?T+d:d);else if(g in t)this.add(t,g,u||t[g],T?T+d:d,n,s);else if(g!=="parseTransform"){gi(g,d);continue}v||(g in o?m.push(g,0,o[g]):typeof t[g]=="function"?m.push(g,2,t[g]()):m.push(g,1,u||t[g])),a.push(g)}}p&&Gn(this)},render:function(t,e){if(e.tween._time||!Ti())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:xt,aliases:gt,getSetter:function(t,e,i){var n=gt[e];return n&&n.indexOf(",")<0&&(e=n),e in vt&&e!==K&&(t._gsap.x||xt(t,"x"))?i&&$i===i?e==="scale"?xr:yr:($i=i||{})&&(e==="scale"?wr:vr):t.style&&!ui(t.style[e])?_r:~e.indexOf("-")?mr:bi(t,e)},core:{_removeProperty:Et,_getMatrix:Mi}};tt.utils.checkPrefix=ee;tt.core.getStyleSaver=Yn;(function(l,t,e,i){var n=Z(l+","+t+","+e,function(s){vt[s]=1});Z(t,function(s){rt.units[s]="deg",Qn[s]=1}),gt[n[13]]=l+","+t,Z(i,function(s){var a=s.split(":");gt[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Z("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(l){rt.units[l]="px"});tt.registerPlugin(ts);var Nt=tt.registerPlugin(ts)||tt;Nt.core.Tween;const Ue=["#5c8a6b","#9CAF88","#D4A574","#fff","#c8e6c9","#7aa87a"];let Te=null;function Ir(l,t,e,i){l.beginPath(),l.moveTo(t,e+i*.3),l.bezierCurveTo(t,e,t-i/2,e,t-i/2,e+i*.3),l.bezierCurveTo(t-i/2,e+i*.6,t,e+i*.9,t,e+i),l.bezierCurveTo(t,e+i*.9,t+i/2,e+i*.6,t+i/2,e+i*.3),l.bezierCurveTo(t+i/2,e,t,e,t,e+i*.3),l.fill()}function Rr(){const l=document.getElementById("confetti-canvas");if(!l){console.warn("Confetti canvas not found");return}const t=l.getContext("2d");l.width=window.innerWidth,l.height=window.innerHeight;const e=[],i=J.animations.confettiCount;for(let o=0;o<i;o++)e.push({x:Math.random()*l.width,y:Math.random()*l.height-l.height,w:6+Math.random()*6,h:4+Math.random()*5,color:Ue[Math.floor(Math.random()*Ue.length)],speed:1.5+Math.random()*2.5,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.12,wobble:Math.random()*Math.PI*2,type:"confetti"});const n=J.animations.heartCount;for(let o=0;o<n;o++)e.push({x:Math.random()*l.width,y:l.height+Math.random()*100,size:12+Math.random()*15,color:Ue[Math.floor(Math.random()*2)],speed:.8+Math.random()*1.5,wobble:Math.random()*Math.PI*2,type:"heart"});function s(){t.clearRect(0,0,l.width,l.height),e.forEach(o=>{o.type==="heart"?(t.fillStyle=o.color,Ir(t,o.x+Math.sin(o.wobble)*12,o.y,o.size),o.y-=o.speed,o.wobble+=.03,o.y<-o.size&&(o.y=l.height+o.size,o.x=Math.random()*l.width)):(t.save(),t.translate(o.x+Math.sin(o.wobble)*20,o.y),t.rotate(o.rotation),t.fillStyle=o.color,t.fillRect(-o.w/2,-o.h/2,o.w,o.h),t.restore(),o.y+=o.speed,o.rotation+=o.rotationSpeed,o.wobble+=.02,o.y>l.height+20&&(o.y=-20,o.x=Math.random()*l.width))}),Te=requestAnimationFrame(s)}const a=()=>{l.width=window.innerWidth,l.height=window.innerHeight};window.addEventListener("resize",a),s()}function Or(){const l=document.getElementById("success-screen"),t=document.getElementById("success-msg");if(!l){console.warn("Success screen not found");return}t&&(t.textContent=J.successMessage),l.classList.add("visible"),Nt.fromTo(l,{opacity:0},{opacity:1,duration:.8,ease:"power2.out"}),Nt.from(".success-title",{scale:.5,opacity:0,duration:.8,delay:.3,ease:"back.out(1.7)"}),Nt.from(".success-message",{y:30,opacity:0,duration:.6,delay:.6}),Nt.from(".success-hearts",{scale:0,duration:.5,delay:.9,ease:"back.out(2)"}),Nt.from(".restart-btn",{opacity:0,y:20,duration:.5,delay:1.2})}function Lr(){Te&&(cancelAnimationFrame(Te),Te=null)}let Ce=0,we=.5,ve=!1,Zi=0,Oe=!1;function Qi(){hs();const l=cs();if(!l){console.error("Failed to initialize page flip");return}Ut.init(),fs(),Fr(l),Vr(),console.log("Valentine's Book initialized successfully")}function hi(l){const t=document.getElementById("page-indicator");if(!t)return;const e=J.pages.length;l<=0?t.textContent="Cover":l<=e?t.textContent=`Page ${l} / ${e}`:t.textContent="The End"}function Fr(l){const t=ls();l.on("flip",o=>{Ut.playPageTurnSound(),hi(o.data),Zi=Date.now(),Oe=o.data>=t-1,o.data===1&&!Ut.hasStarted&&Ut.tryPlayMusic()});const e=document.getElementById("nav-prev"),i=document.getElementById("nav-next");e&&e.addEventListener("click",o=>{o.stopPropagation(),en()}),i&&i.addEventListener("click",o=>{o.stopPropagation(),Oe?li():tn()}),document.addEventListener("keydown",Br);const n=document.getElementById("music-btn");n&&n.addEventListener("click",Wr),document.addEventListener("click",o=>{o.target.id==="yes-btn"&&$r(),(o.target.id==="end-page-btn"||o.target.closest("#end-page-btn"))&&Date.now()-Zi>900&&li()}),document.addEventListener("mouseenter",Gr,!0);const s=document.getElementById("back-to-book-btn");s&&s.addEventListener("click",Hr);const a=document.getElementById("restart-btn");a&&a.addEventListener("click",Nr),window.addEventListener("resize",us),zr(),hi(0)}function zr(){const l=document.getElementById("volume-dial"),t=document.getElementById("volume-knob");document.getElementById("volume-fill"),document.getElementById("volume-label");const e=document.getElementById("bg-music");if(!l||!t||!e)return;Ki(we),e.volume=we,l.addEventListener("mousedown",i),l.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("mousemove",n),document.addEventListener("touchmove",n,{passive:!1}),document.addEventListener("mouseup",s),document.addEventListener("touchend",s);function i(o){o.preventDefault(),ve=!0,l.classList.add("dragging"),a(o)}function n(o){ve&&(o.preventDefault(),a(o))}function s(){ve&&(ve=!1,l.classList.remove("dragging"))}function a(o){const c=l.getBoundingClientRect();let d=((o.touches?o.touches[0].clientX:o.clientX)-c.left)/c.width;d=Math.max(0,Math.min(1,d)),we=d,e.volume=we,Ki(d)}}function Ki(l){const t=document.getElementById("volume-fill"),e=document.getElementById("volume-knob"),i=document.getElementById("volume-label"),n=l*100;t&&(t.style.width=`${n}%`),e&&(e.style.left=`${n}%`),i&&(i.textContent=`${Math.round(n)}%`)}function Br(l){switch(l.code){case"ArrowRight":case"Space":l.preventDefault(),Oe?li():tn();break;case"ArrowLeft":l.preventDefault(),en();break}}async function Wr(){const l=document.getElementById("music-btn"),t=await Ut.toggleMusic();l&&(l.textContent=t?"üîä":"üîá",l.setAttribute("aria-label",t?"Mute music":"Play music"))}function li(){const l=document.getElementById("question-screen"),t=document.querySelector(".book-container"),e=document.getElementById("book-footer");l&&(l.classList.add("visible"),l.setAttribute("aria-hidden","false")),t&&(t.style.opacity="0",t.style.pointerEvents="none"),e&&(e.style.opacity="0")}function Hr(){const l=document.getElementById("question-screen"),t=document.querySelector(".book-container"),e=document.getElementById("book-footer"),i=Ji();l&&(l.classList.remove("visible"),l.setAttribute("aria-hidden","true")),t&&(t.style.opacity="1",t.style.pointerEvents="auto"),e&&(e.style.opacity="1"),i&&i.flipPrev()}function $r(){const l=document.getElementById("question-screen");l&&l.classList.remove("visible"),Or(),Rr(),Ut.playSuccessSound()}function Gr(l){if(l.target.id!=="no-btn")return;Ce++;const t=l.target,e=J.noButtonTexts,i=(Ce-1)%e.length;t.textContent=e[i];const n=window.innerWidth,s=window.innerHeight,a=t.getBoundingClientRect(),o=100,c=80,u=o,d=n-o-a.width,_=c,x=s-c-a.height,w=u+Math.random()*(d-u),b=_+Math.random()*(x-_),g=Math.min(Ce*.01,.3),P=Math.max(.7,1-g);t.style.left=`${w}px`,t.style.top=`${b}px`,t.style.transform=`scale(${P})`}function Nr(){const l=document.getElementById("success-screen");l&&(l.classList.remove("visible"),l.style.opacity="");const t=document.getElementById("question-screen");t&&(t.classList.remove("visible"),t.setAttribute("aria-hidden","true"));const e=document.querySelector(".book-container");e&&(e.style.opacity="1",e.style.pointerEvents="auto");const i=document.getElementById("book-footer");i&&(i.style.opacity="1"),Lr();const n=document.getElementById("confetti-canvas");n&&n.getContext("2d").clearRect(0,0,n.width,n.height);const s=Ji();s&&s.turnToPage(0),Ce=0,Oe=!1,hi(0)}function Vr(){const l=document.getElementById("loading-screen");l&&setTimeout(()=>{l.classList.add("hidden"),setTimeout(()=>{l.remove()},800)},500)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Qi):Qi();
